{"componentChunkName":"component---src-templates-article-js","path":"/features/plugins","webpackCompilationHash":"a78756acb0bf0089aece","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"path":"/features/constraints","title":"Constraints"}}},{"node":{"frontmatter":{"path":"/features/offline-cache","title":"Offline Cache"}}},{"node":{"frontmatter":{"path":"/features/pnp","title":"Plug'n'Play"}}},{"node":{"frontmatter":{"path":"/features/plugins","title":"Plugins"}}},{"node":{"frontmatter":{"path":"/features/protocols","title":"Protocols"}}},{"node":{"frontmatter":{"path":"/features/workspaces","title":"Workspaces"}}},{"node":{"frontmatter":{"path":"/features/zero-installs","title":"Zero-Installs"}}}]},"markdownRemark":{"html":"<p>Ever since Yarn was created, our very essence has been about experimenting, evolving, pushing the status quo - rinse and repeat, each time one step further, each time paving the way for our next move.</p>\n<p>As you can guess, this philosophy (coupled with the high number of external contribution we receive) requires us to iterate fast in order to accomodate with the various experiments that we brew. In a major step forward, Yarn got redesigned in the v2 in order to leverage a new modular API that can be extended through plugins. Nowadays, most of our features are implemented through those plugins - even <code class=\"language-text\">yarn add</code> and <code class=\"language-text\">yarn install</code> are preinstalled plugins!</p>\n<h2 id=\"what-can-plugins-do\"><a href=\"#what-can-plugins-do\" aria-label=\"what can plugins do permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What can plugins do?</h2>\n<ul>\n<li>\n<p><strong>Plugins can add new resolvers.</strong> Resolvers are the components tasked from converting dependency ranges (for example <code class=\"language-text\">^1.2.0</code>) into fully-qualified package references (for example <code class=\"language-text\">npm:1.2.0</code>). By implementing a resolver, you can tell Yarn which versions are valid candidates to a specific range.</p>\n</li>\n<li>\n<p><strong>Plugins can add new fetchers.</strong> Fetchers are the components that take the fully-qualified package references we mentioned in the previous step (for example <code class=\"language-text\">npm:1.2.0</code>) and know how to obtain the data of the package they belong to. Fetchers can work with remote packages (for example the npm registry), but can also find the packages directly from their location on the disk (or any other data source).</p>\n</li>\n<li>\n<p><strong>Plugins can add new linkers.</strong> Once all the packages have been located and are ready for installation, Yarn will call the linkers to generate the files needed for the install targets to work properly. As an example, the PnP linker would generate the <code class=\"language-text\">.pnp.js</code> manifest, and a Python linker would instead generate the virtualenv files needed.</p>\n</li>\n<li>\n<p><strong>Plugins can add new commands.</strong> Each plugin can ship as many commands as they see fit, which will be injected into our CLI (also making them available through <code class=\"language-text\">yarn --help</code>). Because the Yarn plugins are dynamically linked with the running Yarn process, they can be very small and guaranteed to share the exact same behavior as your package manager (which wouldn't be the case if you were to reimplement the workspace detection, for example).</p>\n</li>\n</ul>\n<h2 id=\"how-to-use-plugins\"><a href=\"#how-to-use-plugins\" aria-label=\"how to use plugins permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to use plugins?</h2>\n<p>Plugins are single-file JS scripts built via the <code class=\"language-text\">@berry/builder</code> tools. They are easy to use:</p>\n<h3 id=\"automatic-setup\"><a href=\"#automatic-setup\" aria-label=\"automatic setup permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Automatic setup</h3>\n<p>The official plugins (the ones whose development happen on the Yarn repository) can be installed using the following commands:</p>\n<ul>\n<li>\n<p><code class=\"language-text\">yarn plugins dl --list</code> will print the name of the available official plugins. Some of them might be marked experimental, in which case they might be subject to breaking changes between releases (they should be mostly stable in general, though).</p>\n</li>\n<li>\n<p><code class=\"language-text\">yarn plugins dl &lt;plugin-name&gt;</code> will download one of the plugins from the list, store it within the <code class=\"language-text\">.yarn/plugins</code> directory, and modify your local <code class=\"language-text\">.yarnrc.yml</code> file to reference it.</p>\n</li>\n<li>\n<p><code class=\"language-text\">yarn plugins dl &lt;url&gt;</code> will do the same thing, but because it uses a URL it will work with any plugin regardless of where the plugin is actually hosted.</p>\n</li>\n</ul>\n<h3 id=\"manual-setup\"><a href=\"#manual-setup\" aria-label=\"manual setup permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Manual setup</h3>\n<p>The <code class=\"language-text\">yarn plugins dl</code> command is useful, but in case you prefer to setup your project yourself:</p>\n<ul>\n<li>\n<p>Download the plugin you want to use and put it somewhere</p>\n</li>\n<li>\n<p>Update your project-level <code class=\"language-text\">.yarnrc.yml</code> file by adding the following property:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">plugins:\n  - &quot;./my-plugin.js&quot;</code></pre></div>\n</li>\n</ul>","frontmatter":{"path":"/features/plugins","title":"Plugins"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"category":"features"}}}