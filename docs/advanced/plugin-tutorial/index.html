<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/berry/styles.b31ddf2c53a0df93c902.css">*{box-sizing:border-box}body,html{height:100%;margin:0;padding:0;font-family:Open Sans;line-height:1.5}code{font-family:PT Mono}:not(pre)>code[class*=language-]{background:transparent!important;padding:unset!important}code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}</style><meta name="generator" content="Gatsby 2.13.6"/><title data-react-helmet="true"></title><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/berry/google-fonts/s/abel/v9/MwQ5bhbm2POE2V9BPQ.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/berry/google-fonts/s/baumans/v8/-W_-XJj9QyTd3Qfpd_04aw.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/berry/google-fonts/s/opensans/v16/mem5YaGs126MiZpBA-UN7rgOUuhp.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/berry/google-fonts/s/opensans/v16/mem5YaGs126MiZpBA-UN_r8OUuhp.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/berry/google-fonts/s/opensans/v16/mem8YaGs126MiZpBA-UFVZ0b.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/berry/google-fonts/s/ptmono/v6/9oRONYoBnWILk-9AnC8zMw.woff2"/><style type="text/css">@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;src:local('Open Sans Light'),local('OpenSans-Light'),url(/berry/google-fonts/s/opensans/v16/mem5YaGs126MiZpBA-UN_r8OUuhp.woff2) format('woff2'),url(/berry/google-fonts/s/opensans/v16/mem5YaGs126MiZpBA-UN_r8OUuhv.woff) format('woff');font-display: swap}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;src:local('Open Sans Regular'),local('OpenSans-Regular'),url(/berry/google-fonts/s/opensans/v16/mem8YaGs126MiZpBA-UFVZ0b.woff2) format('woff2'),url(/berry/google-fonts/s/opensans/v16/mem8YaGs126MiZpBA-UFVZ0d.woff) format('woff');font-display: swap}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;src:local('Open Sans Bold'),local('OpenSans-Bold'),url(/berry/google-fonts/s/opensans/v16/mem5YaGs126MiZpBA-UN7rgOUuhp.woff2) format('woff2'),url(/berry/google-fonts/s/opensans/v16/mem5YaGs126MiZpBA-UN7rgOUuhv.woff) format('woff');font-display: swap}@font-face{font-family:Abel;font-style:normal;font-weight:400;src:local('Abel Regular'),local('Abel-Regular'),url(/berry/google-fonts/s/abel/v9/MwQ5bhbm2POE2V9BPQ.woff2) format('woff2'),url(/berry/google-fonts/s/abel/v9/MwQ5bhbm2POE2V9BOw.woff) format('woff');font-display: swap}@font-face{font-family:Baumans;font-style:normal;font-weight:400;src:local('Baumans Regular'),local('Baumans-Regular'),url(/berry/google-fonts/s/baumans/v8/-W_-XJj9QyTd3Qfpd_04aw.woff2) format('woff2'),url(/berry/google-fonts/s/baumans/v8/-W_-XJj9QyTd3Qfpd_04bQ.woff) format('woff');font-display: swap}@font-face{font-family:'PT Mono';font-style:normal;font-weight:400;src:local('PT Mono'),local('PTMono-Regular'),url(/berry/google-fonts/s/ptmono/v6/9oRONYoBnWILk-9AnC8zMw.woff2) format('woff2'),url(/berry/google-fonts/s/ptmono/v6/9oRONYoBnWILk-9AnC8zNQ.woff) format('woff');font-display: swap}</style><link rel="shortcut icon" href="/berry/icons/icon-48x48.png"/><link rel="manifest" href="/berry/manifest.webmanifest"/><meta name="theme-color" content="#2188b6"/><link rel="apple-touch-icon" sizes="48x48" href="/berry/icons/icon-48x48.png"/><link rel="apple-touch-icon" sizes="72x72" href="/berry/icons/icon-72x72.png"/><link rel="apple-touch-icon" sizes="96x96" href="/berry/icons/icon-96x96.png"/><link rel="apple-touch-icon" sizes="144x144" href="/berry/icons/icon-144x144.png"/><link rel="apple-touch-icon" sizes="192x192" href="/berry/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/berry/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/berry/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/berry/icons/icon-512x512.png"/><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link as="script" rel="preload" href="/berry/styles-4fef623f4e6a1543d0e4.js"/><link as="script" rel="preload" href="/berry/component---src-templates-article-js-51d3ba0bb0334c0ab9a3.js"/><link as="script" rel="preload" href="/berry/2-915c4a4c7b667eb20f10.js"/><link as="script" rel="preload" href="/berry/1-81f9ba4404cccbef1ffa.js"/><link as="script" rel="preload" href="/berry/app-9084bcf22eb2ff5c3050.js"/><link as="script" rel="preload" href="/berry/webpack-runtime-4f4d3c245cb515ff94fc.js"/><link as="fetch" rel="preload" href="/berry/page-data/advanced/plugin-tutorial/page-data.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><style data-emotion-css="3fu4ya">@media (min-width:601px){.css-3fu4ya{position:-webkit-sticky;position:sticky;top:0;z-index:1;}}</style><div class="css-3fu4ya e1e22q4b0"><style data-emotion-css="14wzgec">.css-14wzgec{display:block;padding:0.8em 1em;font-weight:light;-webkit-text-decoration:none;text-decoration:none;background:#2188b6;color:rgba(255,255,255,0.8);}</style><a href="https://github.com/yarnpkg/berry" class="css-14wzgec e1e22q4b1"><style data-emotion-css="ol3iif">.css-ol3iif{font-weight:bold;color:#ffffff;}</style><span class="css-ol3iif e1e22q4b2">Important:</span> This documentation covers the v2 onwards and is actively being worked on. Come help us!</a><style data-emotion-css="afjtw6">.css-afjtw6{background:#ffffff;}@media (min-width:601px){.css-afjtw6{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}</style><header class="css-afjtw6 e1e22q4b3"><style data-emotion-css="k008qs">.css-k008qs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><div class="css-k008qs e1e22q4b4"><style data-emotion-css="rmb94o">.css-rmb94o{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 1em;}@media (max-width:600px){.css-rmb94o{margin-right:auto;padding:1em;}}</style><a class="css-rmb94o e1e22q4b5" href="/berry/"><img alt="Yarn" src="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTE1NC44IDUxOCI+PHN0eWxlPi5zdDB7ZmlsbDojMmM4ZWJifS5zdDF7ZmlsbDojZmZmfTwvc3R5bGU+PHBhdGggY2xhc3M9InN0MCIgZD0iTTcxOC42IDI1Ny44Yy04IDI3LjYtMjAuOCA0Ny42LTM1LjIgNjMuNlYxODFjMC05LjYtOC40LTE3LjYtMjEuNi0xNy42LTUuNiAwLTEwLjQgMi44LTEwLjQgNi44IDAgMi44IDEuNiA1LjIgMS42IDEyLjh2NjQuNGMtNC44IDI4LTE2LjggNTQtMzIuOCA1NC0xMS42IDAtMTguNC0xMS42LTE4LjQtMzMuMiAwLTMzLjYgNC40LTUxLjIgMTEuNi04MC44IDEuNi02IDEzLjItMjItNi40LTIyLTIxLjIgMC0xOC40IDgtMjEuMiAxNC44IDAgMC0xMy40IDQ3LjYtMTMuNCA5MCAwIDM0LjggMTQuNiA1Ny42IDQxLjQgNTcuNiAxNy4yIDAgMjkuNi0xMS42IDM5LjItMjcuNlYzNTFjLTI2LjQgMjMuMi00OS42IDQzLjYtNDkuNiA4NCAwIDI1LjYgMTYgNDYgMzguNCA0NiAyMC40IDAgNDEuNi0xNC44IDQxLjYtNTYuOFYzNTVjMjEuNi0xOC44IDQ0LjgtNDIuNCA1OC40LTg4LjguNC0xLjYuNC0zLjYuNC00IDAtNy42LTcuNi0xNi40LTE0LTE2LjQtNCAwLTcuMiAzLjYtOS42IDEyem0tNzYuOCAxOThjLTYuNCAwLTEwLjQtOS42LTEwLjQtMjIgMC0yNCA4LjgtMzkuMiAyMS42LTUyLjR2NDIuOGMwIDcuNiAxLjYgMzEuNi0xMS4yIDMxLjZ6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTgzMy40IDMwMWMtOS42IDAtMTMuNi05LjYtMTMuNi0xOC40di02NmMwLTkuNi04LjQtMTcuNi0yMS42LTE3LjYtNS42IDAtMTAuNCAyLjgtMTAuNCA2LjggMCAyLjggMS42IDUuMiAxLjYgMTIuOHY2MS42Qzc4NSAyOTEuNCA3NzcuOCAzMDEgNzY3IDMwMWMtMTQgMC0yMi44LTEyLTIyLjgtMzIuOCAwLTU3LjYgMzUuNi04My42IDY2LTgzLjYgNCAwIDggLjggMTEuNi44IDQgMCA1LjItMi40IDUuMi05LjIgMC0xMC40LTcuNi0xNi44LTE4LjQtMTYuOC00OC44IDAtOTUuMiA0MC44LTk1LjIgMTA3LjYgMCAzNCAxNi40IDYwLjQgNDcuNiA2MC40IDE1LjIgMCAyNi40LTcuMiAzNC40LTE2LjQgNiA5LjYgMTYuOCAxNi40IDMwLjggMTYuNCAzNC40IDAgNTAuNC0zNiA1Ny4yLTYyLjQuNC0xLjYuNC0yLjQuNC0yLjggMC03LjYtNy42LTE2LjQtMTQtMTYuNC00IDAtOCAzLjYtOS42IDEyLTMuNiAxNy42LTEwLjggNDMuMi0yNi44IDQzLjJ6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTk0OSAzMjcuNGMzNC40IDAgNTAtMzYgNTcuMi02Mi40IDAtLjguNC0xLjYuNC0yLjggMC03LjYtNy42LTE2LjQtMTQtMTYuNC00IDAtOCAzLjYtOS42IDEyLTMuNiAxNy42LTEwLjQgNDMuMi0yOC44IDQzLjItMTAuOCAwLTE2LTEwLjQtMTYtMjEuNiAwLTQwIDE4LTg3LjIgMTgtOTIgMS42LTkuMi0xNC40LTIyLjQtMTkuMi0yMi40aC0yMC44Yy00IDAtOCAwLTIxLjItMS42LTQuNC0xNi40LTE1LjYtMjEuMi0yNS4yLTIxLjItMTAuNCAwLTIwIDcuMi0yMCAxOC40IDAgMTEuNiA3LjIgMjAgMTcuMiAyNS42LS40IDIwLjQtMiA1My42LTYuNCA2OS42LTMuNiAxMy42IDE3LjIgMjggMjIuNCAxMS4yIDcuMi0yMy4yIDkuNi01OCAxMC03My42aDM0LjhjLTEyLjggMzQuNC0yMCA2Mi44LTIwIDg4LjQgMCAzNS4yIDIyLjQgNDUuNiA0MS4yIDQ1LjZ6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTk4NC42IDMwOS44YzAgMTQuOCAxMS4yIDE3LjYgMTkuMiAxNy42IDExLjYgMCAxMS4yLTkuNiAxMS4yLTE3LjJ2LTU4LjRjMi44LTMxLjYgMjcuNi02NiAzOS4yLTY2IDcuNiAwIDguNCAxMC40IDguNCAyMi44djgxLjJjMCAyMC40IDEyLjQgMzcuNiAzMy42IDM3LjYgMzQuNCAwIDUxLjQtMzYgNTguMi02Mi40LjQtMS42LjQtMi40LjQtMi44IDAtNy42LTcuNi0xNi40LTE0LTE2LjQtNCAwLTggMy42LTkuNiAxMi0zLjYgMTcuNi0xMS44IDQzLjItMjcuOCA0My4yLTEwLjQgMC0xMC40LTE0LjgtMTAuNC0xOC40di04Mi44YzAtMTguNC02LjQtNDAuNC0zMy4yLTQwLjQtMTkuNiAwLTM0IDE3LjItNDQuOCAzOS42di0xOGMwLTkuNi04LjQtMTcuNi0yMS42LTE3LjYtNS42IDAtMTAuNCAyLjgtMTAuNCA2LjggMCAyLjggMS42IDUuMiAxLjYgMTIuOHYxMjYuOHpNMjU5IDBjMTQzIDAgMjU5IDExNiAyNTkgMjU5UzQwMiA1MTggMjU5IDUxOCAwIDQwMiAwIDI1OSAxMTYgMCAyNTkgMHoiLz48cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDM1LjIgMzM3LjVjLTEuOC0xNC4yLTEzLjgtMjQtMjkuMi0yMy44LTIzIC4zLTQyLjMgMTIuMi01NS4xIDIwLjEtNSAzLjEtOS4zIDUuNC0xMyA3LjEuOC0xMS42LjEtMjYuOC01LjktNDMuNS03LjMtMjAtMTcuMS0zMi4zLTI0LjEtMzkuNCA4LjEtMTEuOCAxOS4yLTI5IDI0LjQtNTUuNiA0LjUtMjIuNyAzLjEtNTgtNy4yLTc3LjgtMi4xLTQtNS42LTYuOS0xMC04LjEtMS44LS41LTUuMi0xLjUtMTEuOS40QzI5My4xIDk2IDI4OS42IDkzLjggMjg2LjkgOTJjLTUuNi0zLjYtMTIuMi00LjQtMTguNC0yLjEtOC4zIDMtMTUuNCAxMS0yMi4xIDI1LjItMSAyLjEtMS45IDQuMS0yLjcgNi4xLTEyLjcuOS0zMi43IDUuNS00OS42IDIzLjgtMi4xIDIuMy02LjIgNC0xMC41IDUuNmguMWMtOC44IDMuMS0xMi44IDEwLjMtMTcuNyAyMy4zLTYuOCAxOC4yLjIgMzYuMSA3LjEgNDcuNy05LjQgOC40LTIxLjkgMjEuOC0yOC41IDM3LjUtOC4yIDE5LjQtOS4xIDM4LjQtOC44IDQ4LjctNyA3LjQtMTcuOCAyMS4zLTE5IDM2LjktMS42IDIxLjggNi4zIDM2LjYgOS44IDQyIDEgMS42IDIuMSAyLjkgMy4zIDQuMi0uNCAyLjctLjUgNS42LjEgOC42IDEuMyA3IDUuNyAxMi43IDEyLjQgMTYuMyAxMy4yIDcgMzEuNiAxMCA0NS44IDIuOSA1LjEgNS40IDE0LjQgMTAuNiAzMS4zIDEwLjZoMWM0LjMgMCA1OC45LTIuOSA3NC44LTYuOCA3LjEtMS43IDEyLTQuNyAxNS4yLTcuNCAxMC4yLTMuMiAzOC40LTEyLjggNjUtMzAgMTguOC0xMi4yIDI1LjMtMTQuOCAzOS4zLTE4LjIgMTMuNi0zLjMgMjIuMS0xNS43IDIwLjQtMjkuNHptLTIzLjggMTQuN2MtMTYgMy44LTI0LjEgNy4zLTQzLjkgMjAuMi0zMC45IDIwLTY0LjcgMjkuMy02NC43IDI5LjNzLTIuOCA0LjItMTAuOSA2LjFjLTE0IDMuNC02Ni43IDYuMy03MS41IDYuNC0xMi45LjEtMjAuOC0zLjMtMjMtOC42LTYuNy0xNiA5LjYtMjMgOS42LTIzcy0zLjYtMi4yLTUuNy00LjJjLTEuOS0xLjktMy45LTUuNy00LjUtNC4zLTIuNSA2LjEtMy44IDIxLTEwLjUgMjcuNy05LjIgOS4zLTI2LjYgNi4yLTM2LjkuOC0xMS4zLTYgLjgtMjAuMS44LTIwLjFzLTYuMSAzLjYtMTEtMy44Yy00LjQtNi44LTguNS0xOC40LTcuNC0zMi43IDEuMi0xNi4zIDE5LjQtMzIuMSAxOS40LTMyLjFzLTMuMi0yNC4xIDcuMy00OC44YzkuNS0yMi41IDM1LjEtNDAuNiAzNS4xLTQwLjZzLTIxLjUtMjMuOC0xMy41LTQ1LjJjNS4yLTE0IDcuMy0xMy45IDktMTQuNSA2LTIuMyAxMS44LTQuOCAxNi4xLTkuNSAyMS41LTIzLjIgNDguOS0xOC44IDQ4LjktMTguOHMxMy0zOS41IDI1LTMxLjhjMy43IDIuNCAxNyAzMiAxNyAzMnMxNC4yLTguMyAxNS44LTUuMmM4LjYgMTYuNyA5LjYgNDguNiA1LjggNjgtNi40IDMyLTIyLjQgNDkuMi0yOC44IDYwLTEuNSAyLjUgMTcuMiAxMC40IDI5IDQzLjEgMTAuOSAyOS45IDEuMiA1NSAyLjkgNTcuOC4zLjUuNC43LjQuN3MxMi41IDEgMzcuNi0xNC41YzEzLjQtOC4zIDI5LjMtMTcuNiA0Ny40LTE3LjggMTcuNS0uMyAxOC40IDIwLjIgNS4yIDIzLjR6Ii8+PC9zdmc+" style="height:3em;vertical-align:middle"/></a><style data-emotion-css="w60let">.css-w60let{margin:1em;margin-left:0;border:1px solid lightgrey;border-radius:10px;width:3em;height:3em;font-size:inherit;background:#ffffff;}@media (min-width:601px){.css-w60let{display:none;}}</style><button class="css-w60let e1e22q4b6">â‰¡</button></div><style data-emotion-css="136322t">.css-136322t{background:#ffffff;}@media (min-width:601px){.css-136322t{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}@media (max-width:600px){.css-136322t{position:absolute;z-index:1;width:100%;-webkit-transform:scaleY(0);-ms-transform:scaleY(0);transform:scaleY(0);-webkit-transform-origin:top left;-ms-transform-origin:top left;transform-origin:top left;-webkit-transition:-webkit-transform .3s;-webkit-transition:transform .3s;transition:transform .3s;}.css-136322t.expanded{-webkit-transform:scaleY(1);-ms-transform:scaleY(1);transform:scaleY(1);}}</style><div class=" css-136322t e1e22q4b7"><style data-emotion-css="1s1x8cq">.css-1s1x8cq{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:4em;border:3px solid transparent;padding:0 1em;font-family:Abel;font-weight:light;-webkit-text-decoration:none;text-decoration:none;text-transform:uppercase;color:#000000;}@media (min-width:601px){.css-1s1x8cq.active{border-bottom-color:#2188b6;}}@media (max-width:600px){.css-1s1x8cq{width:100%;}}</style><a class="css-1s1x8cq e1e22q4b8" href="/berry/">Home</a><a class="css-1s1x8cq e1e22q4b8" href="/berry/getting-started">Getting started</a><a class="css-1s1x8cq e1e22q4b8" href="/berry/configuration">Configuration</a><a class="css-1s1x8cq e1e22q4b8" href="/berry/features">Features</a><a class="css-1s1x8cq e1e22q4b8" href="/berry/cli">CLI</a><a class="css-1s1x8cq e1e22q4b8 active" href="/berry/advanced">Advanced</a></div></header></div><main><style data-emotion-css="w837w5">.css-w837w5{position:relative;}@media (min-width:601px){.css-w837w5{padding-left:300px;}}</style><div class="css-w837w5 e136yufg0"><style data-emotion-css="1m2g9kf">@media (min-width:601px){.css-1m2g9kf{position:fixed;left:0;width:300px;height:calc(100vh - 4em);overflow-y:auto;background:#d1dee8;}}</style><div class="css-1m2g9kf e136yufg1"><style data-emotion-css="1srnx9y">.css-1srnx9y{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:1px solid #cfdee9;padding:1.5em;-webkit-text-decoration:none;text-decoration:none;background:#ffffff;color:#333333;}.css-1srnx9y:first-of-type{border-top:1px solid #cfdee9;}.css-1srnx9y::before{content:"";position:absolute;z-index:1;top:-1px;bottom:-1px;right:0;width:5px;background:#cfdee9;}.css-1srnx9y.active::before{background:#2188b6;}</style><a class="css-1srnx9y e136yufg2" href="/berry/advanced/architecture">Architecture</a><a class="css-1srnx9y e136yufg2" href="/berry/advanced/contributing">Contributing</a><a class="css-1srnx9y e136yufg2" href="/berry/advanced/error-codes">Error Codes</a><a class="css-1srnx9y e136yufg2" href="/berry/advanced/lexicon">Lexicon</a><a class="css-1srnx9y e136yufg2" href="/berry/advanced/migration">Migration</a><a class="css-1srnx9y e136yufg2" href="/berry/advanced/peer-dependencies">Peer Dependencies</a><a aria-current="page" class="css-1srnx9y e136yufg2 active" href="/berry/advanced/plugin-tutorial">Plugin Tutorial</a><a class="css-1srnx9y e136yufg2" href="/berry/advanced/pnpapi">PnP API</a><a class="css-1srnx9y e136yufg2" href="/berry/advanced/pnpify">PnPify</a></div><style data-emotion-css="rnvzr0">.css-rnvzr0 > *{overflow:auto;}</style><div class="css-rnvzr0 e136yufg3"><style data-emotion-css="2aowkf">.css-2aowkf{padding:2em;}@media (min-width:601px){.css-2aowkf{border-top:1px solid #cfdee9;text-align:justify;}}</style><div class="css-2aowkf e15875m70"><div style="max-width:900px"><article class="css-0 ej1wll30"><style data-emotion-css="1ry8ma5">.css-1ry8ma5{box-sizing:border-box;margin:0;height:4rem;border-bottom:1px solid;font-weight:300;font-size:2rem;line-height:4rem;}.css-1ry8ma5 + div > blockquote{font-style:normal;}</style><h1 class="css-1ry8ma5 ej1wll31">Plugin Tutorial</h1><style data-emotion-css="1qnhlud">.css-1qnhlud blockquote{margin-left:0;border-left:3px solid #859daf;padding-left:.5em;font-style:italic;color:#859daf;}.css-1qnhlud a:not(.anchor){border-bottom:1px solid;-webkit-text-decoration:none;text-decoration:none;color:#007aa2;}.css-1qnhlud a:not(.anchor):hover{color:#62b0ca;}.css-1qnhlud p,.css-1qnhlud table{margin-bottom:1em;}.css-1qnhlud table{width:100%;border-collapse:collapse;}.css-1qnhlud th{color:#007aa2;}.css-1qnhlud th,.css-1qnhlud td{border:1px solid #007aa2;padding:.5em 1em;}.css-1qnhlud h1{margin-top:0;}.css-1qnhlud h2,.css-1qnhlud h3,.css-1qnhlud h4{border-bottom:1px solid #d1dee8;padding-bottom:0.2em;font-weight:300;}.css-1qnhlud pre{padding:1em;overflow-x:auto;background:#242424;}.css-1qnhlud code{display:inline-block;text-align:left;color:#007aa2;}.css-1qnhlud pre code{color:#ddddcc;}</style><div class="css-1qnhlud ej1wll32"><p>Starting from the v2, Yarn now supports plugins. For more information about what they are and in which case you'd want to use them, consult the <a href="/berry/features/plugins">dedicated page</a>. We'll talk here about the exact steps needed to write one. It's quite simple, really!</p>
<h2 id="what-does-a-plugin-look-like"><a href="#what-does-a-plugin-look-like" aria-label="what does a plugin look like permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What does a plugin look like?</h2>
<p>Plugins are scripts that get loaded at runtime by Yarn, and that can inject new behaviors into it. They also can require some packages provided by Yarn itself, such as <code class="language-text">@berry/core</code>. This allows you to use the exact same core API as the Yarn binary currently in use, kinda like if it was a peer dependency!</p>
<blockquote>
<p><strong>Important:</strong> Since plugins are loaded before Yarn starts (and thus before you make your first install), it's strongly advised to write your plugins in such a way that they work without dependencies. If that becomes difficult, know that we provide a tool that can bundle your plugins into a single Javascript file, ready to be published.</p>
</blockquote>
<h2 id="writing-our-first-plugin"><a href="#writing-our-first-plugin" aria-label="writing our first plugin permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Writing our first plugin</h2>
<p>Open in a text editor a new file called <code class="language-text">plugin-hello-world.js</code>, and type the following code:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`plugin-hello-world`</span></span><span class="token punctuation">,</span>
  <span class="token function-variable function">factory</span><span class="token punctuation">:</span> <span class="token parameter">require</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>We have our plugin, but now we need to register it so that Yarn knows where to find it. To do this, we'll just add an entry within the <code class="language-text">.yarnrc</code> file at the root of the repository:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">plugins</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> ./plugin<span class="token punctuation">-</span>hello<span class="token punctuation">-</span>world.js</code></pre></div>
<p>That's it! You have your first plugin, congratulations! Of course it doesn't do much (or anything at all, really), but we'll see how to extend it to make it more powerful.</p>
<h2 id="using-hooks"><a href="#using-hooks" aria-label="using hooks permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using hooks</h2>
<p>Plugins can register to various events in the Yarn lifetime, and provide them additional information to alter their behavior. To do this, you just need to declare a new <code class="language-text">hooks</code> property in your plugin and add members for each hook you want to listen to:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`plugin-hello-world`</span></span><span class="token punctuation">,</span>
  <span class="token function-variable function">factory</span><span class="token punctuation">:</span> <span class="token parameter">require</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      hooks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token function">setupScriptEnvironment</span><span class="token punctuation">(</span><span class="token parameter">scriptEnv</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          scriptEnv<span class="token punctuation">.</span><span class="token constant">HELLO_WORLD</span> <span class="token operator">=</span> <span class="token template-string"><span class="token string">`my first plugin!`</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>In this example, we registered to the <code class="language-text">setupScriptEnvironment</code> hook and used it to inject an argument into the environment. Now, each time you'll run a script, you'll see that your env will contain a new value called <code class="language-text">HELLO_WORLD</code>!</p>
<p>Hooks are numerous, and we're still working on them. Some might be added, removed, or changed, based on your feedback. So if you'd like to do something hooks don't allow you to do yet, come tell us!</p>
<h2 id="using-commands"><a href="#using-commands" aria-label="using commands permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using commands</h2>
<p>Plugins can also register their own commands. To do this, we just have to write them using the <a href="https://github.com/arcanis/clipanion"><code class="language-text">clipanion</code></a> library - and we don't even have to add it to our dependencies! Let's see an example:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`plugin-hello-world`</span></span><span class="token punctuation">,</span>
  <span class="token function-variable function">factory</span><span class="token punctuation">:</span> <span class="token parameter">require</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      commands<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token parameter">clipanion</span> <span class="token operator">=></span> clipanion<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`hello world`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>stdout<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          stdout<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`This is my very own plugin ðŸ˜Ž`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>Now, try to run <code class="language-text">yarn hello world</code>. You'll see your message appear! Note that you can use the full set of features provided by clipanion, including short options, long options, variadic argument lists, ... You can even validate your options using the <a href="https://github.com/jquense/yup"><code class="language-text">yup</code></a> library, which we provide. Here's an example where we only accept email addresses as parameter:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`plugin-hello-world`</span></span><span class="token punctuation">,</span>
  <span class="token function-variable function">factory</span><span class="token punctuation">:</span> <span class="token parameter">require</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// We must require yup, but we don't have to add it to our dependencies! It's bundled with Yarn itself, and we can access it using the `require` function in parameter.</span>
    <span class="token keyword">const</span> yup <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`yup`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        commands<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token parameter">clipanion</span> <span class="token operator">=></span> clipanion<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`my login [--email EMAIL]`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            email<span class="token punctuation">:</span> yup<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">required</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">email</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>stdout<span class="token punctuation">,</span> email<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
            stdout<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Logged to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>email<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> ðŸ’Œ`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div></div></article></div></div></div></div></main></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/advanced/plugin-tutorial";window.webpackCompilationHash="a78756acb0bf0089aece";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-9084bcf22eb2ff5c3050.js"],"component---src-templates-article-js":["/component---src-templates-article-js-51d3ba0bb0334c0ab9a3.js"],"component---src-pages-index-js":["/component---src-pages-index-js-6666249f470f10bdddc4.js"],"component---src-pages-404-js":["/component---src-pages-404-js-40c6a0bcef763af15d4a.js"],"component---src-pages-configuration-manifest-js":["/component---src-pages-configuration-manifest-js-4f881e68b8322ba2e2c0.js"],"component---src-pages-configuration-yarnrc-js":["/component---src-pages-configuration-yarnrc-js-76848ea663d99be2b101.js"],"component---src-pages-package-js":["/component---src-pages-package-js-aec94942e390df9c5511.js"]};/*]]>*/</script><script src="/berry/webpack-runtime-4f4d3c245cb515ff94fc.js" async=""></script><script src="/berry/app-9084bcf22eb2ff5c3050.js" async=""></script><script src="/berry/1-81f9ba4404cccbef1ffa.js" async=""></script><script src="/berry/2-915c4a4c7b667eb20f10.js" async=""></script><script src="/berry/component---src-templates-article-js-51d3ba0bb0334c0ab9a3.js" async=""></script><script src="/berry/styles-4fef623f4e6a1543d0e4.js" async=""></script></body></html>