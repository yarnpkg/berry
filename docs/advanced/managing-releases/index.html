<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/berry/styles.54754a2ec8f2f24a8638.css">code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}*{box-sizing:border-box}body,html{height:100%;margin:0;padding:0;font-family:Open Sans;line-height:1.5}code{font-family:PT Mono}:not(pre)>code[class*=language-]{background:transparent!important;padding:unset!important}a{color:#117cad;text-decoration:none}.hljs{display:block;overflow-x:auto;padding:.5em;background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><meta name="generator" content="Gatsby 2.13.6"/><title data-react-helmet="true"></title><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/berry/google-fonts/s/abel/v10/MwQ5bhbm2POE2V9BPQ.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/berry/google-fonts/s/baumans/v9/-W_-XJj9QyTd3Qfpd_04aw.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/berry/google-fonts/s/opensans/v17/mem5YaGs126MiZpBA-UN7rgOUuhp.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/berry/google-fonts/s/opensans/v17/mem5YaGs126MiZpBA-UN_r8OUuhp.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/berry/google-fonts/s/opensans/v17/mem8YaGs126MiZpBA-UFVZ0b.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/berry/google-fonts/s/ptmono/v7/9oRONYoBnWILk-9AnC8zMw.woff2"/><style type="text/css">@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;src:local('Open Sans Light'),local('OpenSans-Light'),url(/berry/google-fonts/s/opensans/v17/mem5YaGs126MiZpBA-UN_r8OUuhp.woff2) format('woff2'),url(/berry/google-fonts/s/opensans/v17/mem5YaGs126MiZpBA-UN_r8OUuhv.woff) format('woff');font-display: swap}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;src:local('Open Sans Regular'),local('OpenSans-Regular'),url(/berry/google-fonts/s/opensans/v17/mem8YaGs126MiZpBA-UFVZ0b.woff2) format('woff2'),url(/berry/google-fonts/s/opensans/v17/mem8YaGs126MiZpBA-UFVZ0d.woff) format('woff');font-display: swap}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;src:local('Open Sans Bold'),local('OpenSans-Bold'),url(/berry/google-fonts/s/opensans/v17/mem5YaGs126MiZpBA-UN7rgOUuhp.woff2) format('woff2'),url(/berry/google-fonts/s/opensans/v17/mem5YaGs126MiZpBA-UN7rgOUuhv.woff) format('woff');font-display: swap}@font-face{font-family:Abel;font-style:normal;font-weight:400;src:local('Abel Regular'),local('Abel-Regular'),url(/berry/google-fonts/s/abel/v10/MwQ5bhbm2POE2V9BPQ.woff2) format('woff2'),url(/berry/google-fonts/s/abel/v10/MwQ5bhbm2POE2V9BOw.woff) format('woff');font-display: swap}@font-face{font-family:Baumans;font-style:normal;font-weight:400;src:local('Baumans Regular'),local('Baumans-Regular'),url(/berry/google-fonts/s/baumans/v9/-W_-XJj9QyTd3Qfpd_04aw.woff2) format('woff2'),url(/berry/google-fonts/s/baumans/v9/-W_-XJj9QyTd3Qfpd_04bQ.woff) format('woff');font-display: swap}@font-face{font-family:'PT Mono';font-style:normal;font-weight:400;src:local('PT Mono'),local('PTMono-Regular'),url(/berry/google-fonts/s/ptmono/v7/9oRONYoBnWILk-9AnC8zMw.woff2) format('woff2'),url(/berry/google-fonts/s/ptmono/v7/9oRONYoBnWILk-9AnC8zNQ.woff) format('woff');font-display: swap}</style><link rel="shortcut icon" href="/berry/icons/icon-48x48.png"/><link rel="manifest" href="/berry/manifest.webmanifest"/><meta name="theme-color" content="#2188b6"/><link rel="apple-touch-icon" sizes="48x48" href="/berry/icons/icon-48x48.png"/><link rel="apple-touch-icon" sizes="72x72" href="/berry/icons/icon-72x72.png"/><link rel="apple-touch-icon" sizes="96x96" href="/berry/icons/icon-96x96.png"/><link rel="apple-touch-icon" sizes="144x144" href="/berry/icons/icon-144x144.png"/><link rel="apple-touch-icon" sizes="192x192" href="/berry/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/berry/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/berry/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/berry/icons/icon-512x512.png"/><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link as="script" rel="preload" href="/berry/styles-c2afc350e05105068187.js"/><link as="script" rel="preload" href="/berry/component---src-templates-article-js-1d37326f7bb36f5934c8.js"/><link as="script" rel="preload" href="/berry/13-f396a69f35ac93ded3dc.js"/><link as="script" rel="preload" href="/berry/1-7f33c8fdae9475ecdb1b.js"/><link as="script" rel="preload" href="/berry/app-32a31d81eaf786d4f683.js"/><link as="script" rel="preload" href="/berry/webpack-runtime-eec24d3d8db54b4f6d28.js"/><link as="fetch" rel="preload" href="/berry/page-data/advanced/managing-releases/page-data.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><style data-emotion-css="1iw4wyv">@media (min-width:761px){.css-1iw4wyv{position:-webkit-sticky;position:sticky;top:0;z-index:1;}}</style><div class="css-1iw4wyv e1e22q4b0"><style data-emotion-css="17lg5tj">.css-17lg5tj{display:block;height:2.5em;padding:0 1em;font-weight:light;-webkit-text-decoration:none;text-decoration:none;line-height:2.5em;background:#2188b6;color:rgba(255,255,255,0.8);}</style><a href="https://github.com/yarnpkg/berry" class="css-17lg5tj e1e22q4b1"><style data-emotion-css="ol3iif">.css-ol3iif{font-weight:bold;color:#ffffff;}</style><span class="css-ol3iif e1e22q4b2">Important:</span> This documentation covers the v2 onwards and is actively being worked on. Come help us!</a><style data-emotion-css="1tbqck0">.css-1tbqck0{background:#ffffff;}@media (min-width:761px){.css-1tbqck0{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}</style><header class="css-1tbqck0 e1e22q4b3"><style data-emotion-css="k008qs">.css-k008qs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><div class="css-k008qs e1e22q4b4"><style data-emotion-css="114nkxc">.css-114nkxc{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 1em;}@media (max-width:760px){.css-114nkxc{margin-right:auto;padding:1em;}}</style><a class="css-114nkxc e1e22q4b5" href="/berry/"><img alt="Yarn" src="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTE1NC44IDUxOCI+PHN0eWxlPi5zdDB7ZmlsbDojMmM4ZWJifS5zdDF7ZmlsbDojZmZmfTwvc3R5bGU+PHBhdGggY2xhc3M9InN0MCIgZD0iTTcxOC42IDI1Ny44Yy04IDI3LjYtMjAuOCA0Ny42LTM1LjIgNjMuNlYxODFjMC05LjYtOC40LTE3LjYtMjEuNi0xNy42LTUuNiAwLTEwLjQgMi44LTEwLjQgNi44IDAgMi44IDEuNiA1LjIgMS42IDEyLjh2NjQuNGMtNC44IDI4LTE2LjggNTQtMzIuOCA1NC0xMS42IDAtMTguNC0xMS42LTE4LjQtMzMuMiAwLTMzLjYgNC40LTUxLjIgMTEuNi04MC44IDEuNi02IDEzLjItMjItNi40LTIyLTIxLjIgMC0xOC40IDgtMjEuMiAxNC44IDAgMC0xMy40IDQ3LjYtMTMuNCA5MCAwIDM0LjggMTQuNiA1Ny42IDQxLjQgNTcuNiAxNy4yIDAgMjkuNi0xMS42IDM5LjItMjcuNlYzNTFjLTI2LjQgMjMuMi00OS42IDQzLjYtNDkuNiA4NCAwIDI1LjYgMTYgNDYgMzguNCA0NiAyMC40IDAgNDEuNi0xNC44IDQxLjYtNTYuOFYzNTVjMjEuNi0xOC44IDQ0LjgtNDIuNCA1OC40LTg4LjguNC0xLjYuNC0zLjYuNC00IDAtNy42LTcuNi0xNi40LTE0LTE2LjQtNCAwLTcuMiAzLjYtOS42IDEyem0tNzYuOCAxOThjLTYuNCAwLTEwLjQtOS42LTEwLjQtMjIgMC0yNCA4LjgtMzkuMiAyMS42LTUyLjR2NDIuOGMwIDcuNiAxLjYgMzEuNi0xMS4yIDMxLjZ6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTgzMy40IDMwMWMtOS42IDAtMTMuNi05LjYtMTMuNi0xOC40di02NmMwLTkuNi04LjQtMTcuNi0yMS42LTE3LjYtNS42IDAtMTAuNCAyLjgtMTAuNCA2LjggMCAyLjggMS42IDUuMiAxLjYgMTIuOHY2MS42Qzc4NSAyOTEuNCA3NzcuOCAzMDEgNzY3IDMwMWMtMTQgMC0yMi44LTEyLTIyLjgtMzIuOCAwLTU3LjYgMzUuNi04My42IDY2LTgzLjYgNCAwIDggLjggMTEuNi44IDQgMCA1LjItMi40IDUuMi05LjIgMC0xMC40LTcuNi0xNi44LTE4LjQtMTYuOC00OC44IDAtOTUuMiA0MC44LTk1LjIgMTA3LjYgMCAzNCAxNi40IDYwLjQgNDcuNiA2MC40IDE1LjIgMCAyNi40LTcuMiAzNC40LTE2LjQgNiA5LjYgMTYuOCAxNi40IDMwLjggMTYuNCAzNC40IDAgNTAuNC0zNiA1Ny4yLTYyLjQuNC0xLjYuNC0yLjQuNC0yLjggMC03LjYtNy42LTE2LjQtMTQtMTYuNC00IDAtOCAzLjYtOS42IDEyLTMuNiAxNy42LTEwLjggNDMuMi0yNi44IDQzLjJ6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTk0OSAzMjcuNGMzNC40IDAgNTAtMzYgNTcuMi02Mi40IDAtLjguNC0xLjYuNC0yLjggMC03LjYtNy42LTE2LjQtMTQtMTYuNC00IDAtOCAzLjYtOS42IDEyLTMuNiAxNy42LTEwLjQgNDMuMi0yOC44IDQzLjItMTAuOCAwLTE2LTEwLjQtMTYtMjEuNiAwLTQwIDE4LTg3LjIgMTgtOTIgMS42LTkuMi0xNC40LTIyLjQtMTkuMi0yMi40aC0yMC44Yy00IDAtOCAwLTIxLjItMS42LTQuNC0xNi40LTE1LjYtMjEuMi0yNS4yLTIxLjItMTAuNCAwLTIwIDcuMi0yMCAxOC40IDAgMTEuNiA3LjIgMjAgMTcuMiAyNS42LS40IDIwLjQtMiA1My42LTYuNCA2OS42LTMuNiAxMy42IDE3LjIgMjggMjIuNCAxMS4yIDcuMi0yMy4yIDkuNi01OCAxMC03My42aDM0LjhjLTEyLjggMzQuNC0yMCA2Mi44LTIwIDg4LjQgMCAzNS4yIDIyLjQgNDUuNiA0MS4yIDQ1LjZ6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTk4NC42IDMwOS44YzAgMTQuOCAxMS4yIDE3LjYgMTkuMiAxNy42IDExLjYgMCAxMS4yLTkuNiAxMS4yLTE3LjJ2LTU4LjRjMi44LTMxLjYgMjcuNi02NiAzOS4yLTY2IDcuNiAwIDguNCAxMC40IDguNCAyMi44djgxLjJjMCAyMC40IDEyLjQgMzcuNiAzMy42IDM3LjYgMzQuNCAwIDUxLjQtMzYgNTguMi02Mi40LjQtMS42LjQtMi40LjQtMi44IDAtNy42LTcuNi0xNi40LTE0LTE2LjQtNCAwLTggMy42LTkuNiAxMi0zLjYgMTcuNi0xMS44IDQzLjItMjcuOCA0My4yLTEwLjQgMC0xMC40LTE0LjgtMTAuNC0xOC40di04Mi44YzAtMTguNC02LjQtNDAuNC0zMy4yLTQwLjQtMTkuNiAwLTM0IDE3LjItNDQuOCAzOS42di0xOGMwLTkuNi04LjQtMTcuNi0yMS42LTE3LjYtNS42IDAtMTAuNCAyLjgtMTAuNCA2LjggMCAyLjggMS42IDUuMiAxLjYgMTIuOHYxMjYuOHpNMjU5IDBjMTQzIDAgMjU5IDExNiAyNTkgMjU5UzQwMiA1MTggMjU5IDUxOCAwIDQwMiAwIDI1OSAxMTYgMCAyNTkgMHoiLz48cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDM1LjIgMzM3LjVjLTEuOC0xNC4yLTEzLjgtMjQtMjkuMi0yMy44LTIzIC4zLTQyLjMgMTIuMi01NS4xIDIwLjEtNSAzLjEtOS4zIDUuNC0xMyA3LjEuOC0xMS42LjEtMjYuOC01LjktNDMuNS03LjMtMjAtMTcuMS0zMi4zLTI0LjEtMzkuNCA4LjEtMTEuOCAxOS4yLTI5IDI0LjQtNTUuNiA0LjUtMjIuNyAzLjEtNTgtNy4yLTc3LjgtMi4xLTQtNS42LTYuOS0xMC04LjEtMS44LS41LTUuMi0xLjUtMTEuOS40QzI5My4xIDk2IDI4OS42IDkzLjggMjg2LjkgOTJjLTUuNi0zLjYtMTIuMi00LjQtMTguNC0yLjEtOC4zIDMtMTUuNCAxMS0yMi4xIDI1LjItMSAyLjEtMS45IDQuMS0yLjcgNi4xLTEyLjcuOS0zMi43IDUuNS00OS42IDIzLjgtMi4xIDIuMy02LjIgNC0xMC41IDUuNmguMWMtOC44IDMuMS0xMi44IDEwLjMtMTcuNyAyMy4zLTYuOCAxOC4yLjIgMzYuMSA3LjEgNDcuNy05LjQgOC40LTIxLjkgMjEuOC0yOC41IDM3LjUtOC4yIDE5LjQtOS4xIDM4LjQtOC44IDQ4LjctNyA3LjQtMTcuOCAyMS4zLTE5IDM2LjktMS42IDIxLjggNi4zIDM2LjYgOS44IDQyIDEgMS42IDIuMSAyLjkgMy4zIDQuMi0uNCAyLjctLjUgNS42LjEgOC42IDEuMyA3IDUuNyAxMi43IDEyLjQgMTYuMyAxMy4yIDcgMzEuNiAxMCA0NS44IDIuOSA1LjEgNS40IDE0LjQgMTAuNiAzMS4zIDEwLjZoMWM0LjMgMCA1OC45LTIuOSA3NC44LTYuOCA3LjEtMS43IDEyLTQuNyAxNS4yLTcuNCAxMC4yLTMuMiAzOC40LTEyLjggNjUtMzAgMTguOC0xMi4yIDI1LjMtMTQuOCAzOS4zLTE4LjIgMTMuNi0zLjMgMjIuMS0xNS43IDIwLjQtMjkuNHptLTIzLjggMTQuN2MtMTYgMy44LTI0LjEgNy4zLTQzLjkgMjAuMi0zMC45IDIwLTY0LjcgMjkuMy02NC43IDI5LjNzLTIuOCA0LjItMTAuOSA2LjFjLTE0IDMuNC02Ni43IDYuMy03MS41IDYuNC0xMi45LjEtMjAuOC0zLjMtMjMtOC42LTYuNy0xNiA5LjYtMjMgOS42LTIzcy0zLjYtMi4yLTUuNy00LjJjLTEuOS0xLjktMy45LTUuNy00LjUtNC4zLTIuNSA2LjEtMy44IDIxLTEwLjUgMjcuNy05LjIgOS4zLTI2LjYgNi4yLTM2LjkuOC0xMS4zLTYgLjgtMjAuMS44LTIwLjFzLTYuMSAzLjYtMTEtMy44Yy00LjQtNi44LTguNS0xOC40LTcuNC0zMi43IDEuMi0xNi4zIDE5LjQtMzIuMSAxOS40LTMyLjFzLTMuMi0yNC4xIDcuMy00OC44YzkuNS0yMi41IDM1LjEtNDAuNiAzNS4xLTQwLjZzLTIxLjUtMjMuOC0xMy41LTQ1LjJjNS4yLTE0IDcuMy0xMy45IDktMTQuNSA2LTIuMyAxMS44LTQuOCAxNi4xLTkuNSAyMS41LTIzLjIgNDguOS0xOC44IDQ4LjktMTguOHMxMy0zOS41IDI1LTMxLjhjMy43IDIuNCAxNyAzMiAxNyAzMnMxNC4yLTguMyAxNS44LTUuMmM4LjYgMTYuNyA5LjYgNDguNiA1LjggNjgtNi40IDMyLTIyLjQgNDkuMi0yOC44IDYwLTEuNSAyLjUgMTcuMiAxMC40IDI5IDQzLjEgMTAuOSAyOS45IDEuMiA1NSAyLjkgNTcuOC4zLjUuNC43LjQuN3MxMi41IDEgMzcuNi0xNC41YzEzLjQtOC4zIDI5LjMtMTcuNiA0Ny40LTE3LjggMTcuNS0uMyAxOC40IDIwLjIgNS4yIDIzLjR6Ii8+PC9zdmc+" style="height:3em;vertical-align:middle"/></a><style data-emotion-css="kapooa">.css-kapooa{margin:1em;margin-left:0;border:1px solid lightgrey;border-radius:10px;width:3em;height:3em;font-size:inherit;background:#ffffff;}@media (min-width:761px){.css-kapooa{display:none;}}</style><button class="css-kapooa e1e22q4b6">â‰¡</button></div><style data-emotion-css="1syd0he">.css-1syd0he{background:#ffffff;}@media (min-width:761px){.css-1syd0he{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}@media (max-width:760px){.css-1syd0he{position:absolute;z-index:1;width:100%;-webkit-transform:scaleY(0);-ms-transform:scaleY(0);transform:scaleY(0);-webkit-transform-origin:top left;-ms-transform-origin:top left;transform-origin:top left;-webkit-transition:-webkit-transform .3s;-webkit-transition:transform .3s;transition:transform .3s;}.css-1syd0he.expanded{-webkit-transform:scaleY(1);-ms-transform:scaleY(1);transform:scaleY(1);}}</style><div class=" css-1syd0he e1e22q4b7"><style data-emotion-css="1rgujud">.css-1rgujud a{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:4em;border:3px solid transparent;padding:0 1em;font-family:Abel;font-weight:light;-webkit-text-decoration:none;text-decoration:none;text-transform:uppercase;color:#000000;}@media (min-width:761px){.css-1rgujud a.active{border-bottom-color:#2188b6;}}@media (max-width:760px){.css-1rgujud a{width:100%;}}</style><div class="css-1rgujud e1e22q4b8"><a href="/berry/">Home</a></div><div class="css-1rgujud e1e22q4b8"><a href="/berry/getting-started">Getting started</a></div><div class="css-1rgujud e1e22q4b8"><a href="/berry/configuration">Configuration</a></div><div class="css-1rgujud e1e22q4b8"><a href="/berry/features">Features</a></div><div class="css-1rgujud e1e22q4b8"><a href="/berry/cli">CLI</a></div><div class="css-1rgujud e1e22q4b8"><a class="active" href="/berry/advanced">Advanced</a></div></div></header></div><main><style data-emotion-css="o4e300">.css-o4e300{position:relative;}@media (min-width:761px){.css-o4e300{padding-left:300px;}}</style><div class="css-o4e300 e136yufg0"><style data-emotion-css="19tcs2g">@media (min-width:761px){.css-19tcs2g{position:fixed;left:0;width:300px;height:calc(100vh - 6.5em);overflow-y:auto;background:#d1dee8;}}</style><div class="css-19tcs2g e136yufg1"><style data-emotion-css="1srnx9y">.css-1srnx9y{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:1px solid #cfdee9;padding:1.5em;-webkit-text-decoration:none;text-decoration:none;background:#ffffff;color:#333333;}.css-1srnx9y:first-of-type{border-top:1px solid #cfdee9;}.css-1srnx9y::before{content:"";position:absolute;z-index:1;top:-1px;bottom:-1px;right:0;width:5px;background:#cfdee9;}.css-1srnx9y.active::before{background:#2188b6;}</style><a class="css-1srnx9y e136yufg2" href="/berry/advanced/architecture">Architecture</a><a class="css-1srnx9y e136yufg2" href="/berry/advanced/contributing">Contributing</a><a class="css-1srnx9y e136yufg2" href="/berry/advanced/error-codes">Error Codes</a><a class="css-1srnx9y e136yufg2" href="/berry/advanced/lexicon">Lexicon</a><a aria-current="page" class="css-1srnx9y e136yufg2 active" href="/berry/advanced/managing-releases">Managing Releases</a><a class="css-1srnx9y e136yufg2" href="/berry/advanced/migration">Migration</a><a class="css-1srnx9y e136yufg2" href="/berry/advanced/peer-dependencies">Peer Dependencies</a><a class="css-1srnx9y e136yufg2" href="/berry/advanced/plugin-tutorial">Plugin Tutorial</a><a class="css-1srnx9y e136yufg2" href="/berry/advanced/pnpapi">PnP API</a><a class="css-1srnx9y e136yufg2" href="/berry/advanced/pnpify">PnPify</a></div><style data-emotion-css="rnvzr0">.css-rnvzr0 > *{overflow:auto;}</style><div class="css-rnvzr0 e136yufg3"><style data-emotion-css="r13wqs">.css-r13wqs{padding:2em;}@media (min-width:761px){.css-r13wqs{border-top:1px solid #cfdee9;text-align:justify;}}</style><div class="css-r13wqs e15875m70"><div style="max-width:900px"><article class="css-0 ej1wll30"><style data-emotion-css="1ry8ma5">.css-1ry8ma5{box-sizing:border-box;margin:0;height:4rem;border-bottom:1px solid;font-weight:300;font-size:2rem;line-height:4rem;}.css-1ry8ma5 + div > blockquote{font-style:normal;}</style><h1 class="css-1ry8ma5 ej1wll31">Managing Releases</h1><style data-emotion-css="iikyzi">.css-iikyzi blockquote{margin-left:0;border-left:3px solid #859daf;padding-left:.5em;font-style:italic;color:#859daf;}.css-iikyzi a:not(.anchor){border-bottom:1px solid;-webkit-text-decoration:none;text-decoration:none;color:#007aa2;}.css-iikyzi a:not(.anchor):hover{color:#62b0ca;}.css-iikyzi p,.css-iikyzi table{margin-bottom:1em;}.css-iikyzi table{width:100%;border-collapse:collapse;}.css-iikyzi th{color:#007aa2;}.css-iikyzi th,.css-iikyzi td{border:1px solid #007aa2;padding:.5em 1em;}.css-iikyzi h1{margin-top:0;}.css-iikyzi h2,.css-iikyzi h3,.css-iikyzi h4{border-bottom:1px solid #d1dee8;padding-bottom:0.2em;font-weight:300;}.css-iikyzi pre{padding:1em;overflow-x:auto;background:#242424;}.css-iikyzi code{display:inline-block;text-align:left;color:#007aa2;}.css-iikyzi pre code{color:#ddddcc;}.css-iikyzi img{max-width:100%;}</style><div class="css-iikyzi ej1wll32"><p>An hard task when working in a monorepo, and in particular when managing multiple packages, is to figure out which packages should be bumped when doing a new release. Yarn offers a few tools that aim to make this workflow easier without need for third-party softwares, althought it's possible to leverage those tools and build more integrated workflows.</p>
<h2 id="auto-updated-dependencies"><a href="#auto-updated-dependencies" aria-label="auto updated dependencies permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Auto-updated dependencies</h2>
<p>When running the <code class="language-text">yarn version</code> command to upgrade the version of a workspace, every other workspace that depend on the first one through a basic semver ranges (<code class="language-text">^x.y.z</code>, <code class="language-text">~x.y.z</code>, ...) will get auto-updated to reference the new version. For example, let's say we have the following workspaces:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">/packages/common (1.0.0)
/packages/server (depends on common@^1.0.0)
/packages/client (depends on common@^1.0.0)</code></pre></div>
<p>In pre-2.0, upgrading <code class="language-text">common</code> would have required you to run the command there, then go into each of <code class="language-text">server</code> and <code class="language-text">client</code> to manually upgrade their dependencies to reference the new version. But not anymore! If we run <code class="language-text">yarn version 1.1.1</code> into <code class="language-text">common</code>, the following changes will be applied:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">/packages/common (1.1.1)
/packages/server (depends on common@^1.1.1)
/packages/client (depends on common@^1.1.1)</code></pre></div>
<p>Of course it's not that important when the packages from the monorepo are always meant to be used as part of the monorepo, but it becomes much more interesting when you work with multiple packages meant to be published. Had you forget to bump the referenced range of either of your dependent packages, your users would have potentially downloaded an old version of <code class="language-text">common</code> which wouldn't have been compatible with the newer one.</p>
<h2 id="deferred-versioning"><a href="#deferred-versioning" aria-label="deferred versioning permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deferred versioning</h2>
<p>Starting from the 2.0, the <code class="language-text">yarn version</code> command now accepts a new flag: <code class="language-text">--deferred</code>. When set, this flag will cause the command to not directly change the <code class="language-text">version</code> field of the local manifest, but instead create a new field called <code class="language-text">nextVersion</code>. For example, the following:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">yarn</span> version 1.0.0
<span class="token function">yarn</span> version minor --deferred</code></pre></div>
<p>Would generate the following field:</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>
  <span class="token property">"nextVersion"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"semver"</span><span class="token operator">:</span> <span class="token string">"1.1.0"</span><span class="token punctuation">,</span>
    <span class="token property">"nonce"</span><span class="token operator">:</span> <span class="token string">"102039092"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>One question you might have is: why? Why does it matter? To answer it, let's take the case of a successful open-source project which receives many contributions. Users work on various features, which you merge, and every once in a while you make a release for everything that got modified.</p>
<p>But now the problem is: how do you choose which packages to bump? Some tools offer to detect it based on the commit messages, but that implies that a specific style of commit message must be followed - and it causes ambiguities when multiple packages are modified in a single commit with various degrees of severity.</p>
<p>What <code class="language-text">--deferred</code> offers, instead, is to let your users (and reviewers) decide when should a package be bumped. By using this flag, they're essentially telling Yarn: "at some point, I'll need to bump this package by at least a minor". Then once all the changes have been made, once all the pull requests have been merged, all that remains is to run <code class="language-text">yarn version apply</code> to simultaneously update the version numbers of all the packages that were scheduled for a bump.</p>
<h2 id="ensuring-that-versions-are-bumped-ci"><a href="#ensuring-that-versions-are-bumped-ci" aria-label="ensuring that versions are bumped ci permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ensuring that versions are bumped (CI)</h2>
<p>One problem with the <code class="language-text">--deferred</code> flag, however, is that it becomes impossible to distinguish whether a PR bumped a package via a redundant strategy (for example when merging two minor features for the same release), or whether the PR author simply forgot to run the command on the affected package.</p>
<p>To solve this problem in an automated way, the <code class="language-text">yarn version check</code> command appeared. When run, this command will figure out which packages changed and whether they received a version bump. If they didn't, an error will be thrown and assuming to integrate this into a CI system the PR author will be asked to be explicit about whether their changes should cause any package to be bumped.</p>
<p>Even better, <code class="language-text">yarn version check</code> also works through transitive dependencies. So going back on our past example, should you modify your <code class="language-text">common</code> package, running <code class="language-text">yarn version check</code> will ask you to explicitly bump any non-private package that would happen to depend on it. Private packages get a pass because they're assumed to only work within the context of your repository, and thus don't need to have their version bumped.</p>
<p>Some changes don't require any version bump, of course! For those, just run <code class="language-text">yarn version decline --deferred</code> and Yarn will take care of the rest.</p>
<blockquote>
<p><strong>How does it work?</strong></p>
<p>You might have seen in the previous section this interesting <code class="language-text">nonce</code> field. The nonce is used to mark whether a package received an explicit version bump or not. When running <code class="language-text">yarn version check</code>, Yarn checks whether each workspace that got modified lists a new nonce compared to master. If they don't, it will recommand you to run <code class="language-text">yarn version ... --deferred</code>, which will generate a new nonce regardless of whether a version bump would be redundant or not.</p>
</blockquote></div></article></div></div></div></div></main></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/advanced/managing-releases";window.webpackCompilationHash="85bc2947a3d955e08c43";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-32a31d81eaf786d4f683.js"],"component---src-templates-article-js":["/component---src-templates-article-js-1d37326f7bb36f5934c8.js"],"component---src-pages-index-js":["/component---src-pages-index-js-70672a3ecc57a4ffbb3d.js"],"component---src-pages-404-js":["/component---src-pages-404-js-0533b1e00339fda1f465.js"],"component---src-pages-configuration-manifest-js":["/component---src-pages-configuration-manifest-js-5d2160dbe051521347e3.js"],"component---src-pages-configuration-yarnrc-js":["/component---src-pages-configuration-yarnrc-js-34c8cf21d441a1cfe0d3.js"],"component---src-pages-package-js":["/component---src-pages-package-js-fbdafeab0e49dadafb63.js"]};/*]]>*/</script><script src="/berry/webpack-runtime-eec24d3d8db54b4f6d28.js" async=""></script><script src="/berry/app-32a31d81eaf786d4f683.js" async=""></script><script src="/berry/1-7f33c8fdae9475ecdb1b.js" async=""></script><script src="/berry/13-f396a69f35ac93ded3dc.js" async=""></script><script src="/berry/component---src-templates-article-js-1d37326f7bb36f5934c8.js" async=""></script><script src="/berry/styles-c2afc350e05105068187.js" async=""></script></body></html>