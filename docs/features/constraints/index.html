<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/berry/styles.54754a2ec8f2f24a8638.css">code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}*{box-sizing:border-box}body,html{height:100%;margin:0;padding:0;font-family:Open Sans;line-height:1.5}code{font-family:PT Mono}:not(pre)>code[class*=language-]{background:transparent!important;padding:unset!important}a{color:#117cad;text-decoration:none}.hljs{display:block;overflow-x:auto;padding:.5em;background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><meta name="generator" content="Gatsby 2.13.6"/><title data-react-helmet="true"></title><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/berry/google-fonts/s/abel/v10/MwQ5bhbm2POE2V9BPQ.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/berry/google-fonts/s/baumans/v9/-W_-XJj9QyTd3Qfpd_04aw.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/berry/google-fonts/s/opensans/v17/mem5YaGs126MiZpBA-UN7rgOUuhp.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/berry/google-fonts/s/opensans/v17/mem5YaGs126MiZpBA-UN_r8OUuhp.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/berry/google-fonts/s/opensans/v17/mem8YaGs126MiZpBA-UFVZ0b.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/berry/google-fonts/s/ptmono/v7/9oRONYoBnWILk-9AnC8zMw.woff2"/><style type="text/css">@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;src:local('Open Sans Light'),local('OpenSans-Light'),url(/berry/google-fonts/s/opensans/v17/mem5YaGs126MiZpBA-UN_r8OUuhp.woff2) format('woff2'),url(/berry/google-fonts/s/opensans/v17/mem5YaGs126MiZpBA-UN_r8OUuhv.woff) format('woff');font-display: swap}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;src:local('Open Sans Regular'),local('OpenSans-Regular'),url(/berry/google-fonts/s/opensans/v17/mem8YaGs126MiZpBA-UFVZ0b.woff2) format('woff2'),url(/berry/google-fonts/s/opensans/v17/mem8YaGs126MiZpBA-UFVZ0d.woff) format('woff');font-display: swap}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;src:local('Open Sans Bold'),local('OpenSans-Bold'),url(/berry/google-fonts/s/opensans/v17/mem5YaGs126MiZpBA-UN7rgOUuhp.woff2) format('woff2'),url(/berry/google-fonts/s/opensans/v17/mem5YaGs126MiZpBA-UN7rgOUuhv.woff) format('woff');font-display: swap}@font-face{font-family:Abel;font-style:normal;font-weight:400;src:local('Abel Regular'),local('Abel-Regular'),url(/berry/google-fonts/s/abel/v10/MwQ5bhbm2POE2V9BPQ.woff2) format('woff2'),url(/berry/google-fonts/s/abel/v10/MwQ5bhbm2POE2V9BOw.woff) format('woff');font-display: swap}@font-face{font-family:Baumans;font-style:normal;font-weight:400;src:local('Baumans Regular'),local('Baumans-Regular'),url(/berry/google-fonts/s/baumans/v9/-W_-XJj9QyTd3Qfpd_04aw.woff2) format('woff2'),url(/berry/google-fonts/s/baumans/v9/-W_-XJj9QyTd3Qfpd_04bQ.woff) format('woff');font-display: swap}@font-face{font-family:'PT Mono';font-style:normal;font-weight:400;src:local('PT Mono'),local('PTMono-Regular'),url(/berry/google-fonts/s/ptmono/v7/9oRONYoBnWILk-9AnC8zMw.woff2) format('woff2'),url(/berry/google-fonts/s/ptmono/v7/9oRONYoBnWILk-9AnC8zNQ.woff) format('woff');font-display: swap}</style><link rel="shortcut icon" href="/berry/icons/icon-48x48.png"/><link rel="manifest" href="/berry/manifest.webmanifest"/><meta name="theme-color" content="#2188b6"/><link rel="apple-touch-icon" sizes="48x48" href="/berry/icons/icon-48x48.png"/><link rel="apple-touch-icon" sizes="72x72" href="/berry/icons/icon-72x72.png"/><link rel="apple-touch-icon" sizes="96x96" href="/berry/icons/icon-96x96.png"/><link rel="apple-touch-icon" sizes="144x144" href="/berry/icons/icon-144x144.png"/><link rel="apple-touch-icon" sizes="192x192" href="/berry/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/berry/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/berry/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/berry/icons/icon-512x512.png"/><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link as="script" rel="preload" href="/berry/styles-c2afc350e05105068187.js"/><link as="script" rel="preload" href="/berry/component---src-templates-article-js-1d37326f7bb36f5934c8.js"/><link as="script" rel="preload" href="/berry/13-2d155786c82a3926738b.js"/><link as="script" rel="preload" href="/berry/1-50f6d08b729e906fd7a6.js"/><link as="script" rel="preload" href="/berry/app-ae3f388b34fccbee89b8.js"/><link as="script" rel="preload" href="/berry/webpack-runtime-5553f1c66b7d1353382e.js"/><link as="fetch" rel="preload" href="/berry/page-data/features/constraints/page-data.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><style data-emotion-css="1iw4wyv">@media (min-width:761px){.css-1iw4wyv{position:-webkit-sticky;position:sticky;top:0;z-index:1;}}</style><div class="css-1iw4wyv e1e22q4b0"><style data-emotion-css="17lg5tj">.css-17lg5tj{display:block;height:2.5em;padding:0 1em;font-weight:light;-webkit-text-decoration:none;text-decoration:none;line-height:2.5em;background:#2188b6;color:rgba(255,255,255,0.8);}</style><a href="https://github.com/yarnpkg/berry" class="css-17lg5tj e1e22q4b1"><style data-emotion-css="ol3iif">.css-ol3iif{font-weight:bold;color:#ffffff;}</style><span class="css-ol3iif e1e22q4b2">Important:</span> This documentation covers the v2 onwards and is actively being worked on. Come help us!</a><style data-emotion-css="1tbqck0">.css-1tbqck0{background:#ffffff;}@media (min-width:761px){.css-1tbqck0{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}</style><header class="css-1tbqck0 e1e22q4b3"><style data-emotion-css="k008qs">.css-k008qs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><div class="css-k008qs e1e22q4b4"><style data-emotion-css="114nkxc">.css-114nkxc{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 1em;}@media (max-width:760px){.css-114nkxc{margin-right:auto;padding:1em;}}</style><a class="css-114nkxc e1e22q4b5" href="/berry/"><img alt="Yarn" src="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTE1NC44IDUxOCI+PHN0eWxlPi5zdDB7ZmlsbDojMmM4ZWJifS5zdDF7ZmlsbDojZmZmfTwvc3R5bGU+PHBhdGggY2xhc3M9InN0MCIgZD0iTTcxOC42IDI1Ny44Yy04IDI3LjYtMjAuOCA0Ny42LTM1LjIgNjMuNlYxODFjMC05LjYtOC40LTE3LjYtMjEuNi0xNy42LTUuNiAwLTEwLjQgMi44LTEwLjQgNi44IDAgMi44IDEuNiA1LjIgMS42IDEyLjh2NjQuNGMtNC44IDI4LTE2LjggNTQtMzIuOCA1NC0xMS42IDAtMTguNC0xMS42LTE4LjQtMzMuMiAwLTMzLjYgNC40LTUxLjIgMTEuNi04MC44IDEuNi02IDEzLjItMjItNi40LTIyLTIxLjIgMC0xOC40IDgtMjEuMiAxNC44IDAgMC0xMy40IDQ3LjYtMTMuNCA5MCAwIDM0LjggMTQuNiA1Ny42IDQxLjQgNTcuNiAxNy4yIDAgMjkuNi0xMS42IDM5LjItMjcuNlYzNTFjLTI2LjQgMjMuMi00OS42IDQzLjYtNDkuNiA4NCAwIDI1LjYgMTYgNDYgMzguNCA0NiAyMC40IDAgNDEuNi0xNC44IDQxLjYtNTYuOFYzNTVjMjEuNi0xOC44IDQ0LjgtNDIuNCA1OC40LTg4LjguNC0xLjYuNC0zLjYuNC00IDAtNy42LTcuNi0xNi40LTE0LTE2LjQtNCAwLTcuMiAzLjYtOS42IDEyem0tNzYuOCAxOThjLTYuNCAwLTEwLjQtOS42LTEwLjQtMjIgMC0yNCA4LjgtMzkuMiAyMS42LTUyLjR2NDIuOGMwIDcuNiAxLjYgMzEuNi0xMS4yIDMxLjZ6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTgzMy40IDMwMWMtOS42IDAtMTMuNi05LjYtMTMuNi0xOC40di02NmMwLTkuNi04LjQtMTcuNi0yMS42LTE3LjYtNS42IDAtMTAuNCAyLjgtMTAuNCA2LjggMCAyLjggMS42IDUuMiAxLjYgMTIuOHY2MS42Qzc4NSAyOTEuNCA3NzcuOCAzMDEgNzY3IDMwMWMtMTQgMC0yMi44LTEyLTIyLjgtMzIuOCAwLTU3LjYgMzUuNi04My42IDY2LTgzLjYgNCAwIDggLjggMTEuNi44IDQgMCA1LjItMi40IDUuMi05LjIgMC0xMC40LTcuNi0xNi44LTE4LjQtMTYuOC00OC44IDAtOTUuMiA0MC44LTk1LjIgMTA3LjYgMCAzNCAxNi40IDYwLjQgNDcuNiA2MC40IDE1LjIgMCAyNi40LTcuMiAzNC40LTE2LjQgNiA5LjYgMTYuOCAxNi40IDMwLjggMTYuNCAzNC40IDAgNTAuNC0zNiA1Ny4yLTYyLjQuNC0xLjYuNC0yLjQuNC0yLjggMC03LjYtNy42LTE2LjQtMTQtMTYuNC00IDAtOCAzLjYtOS42IDEyLTMuNiAxNy42LTEwLjggNDMuMi0yNi44IDQzLjJ6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTk0OSAzMjcuNGMzNC40IDAgNTAtMzYgNTcuMi02Mi40IDAtLjguNC0xLjYuNC0yLjggMC03LjYtNy42LTE2LjQtMTQtMTYuNC00IDAtOCAzLjYtOS42IDEyLTMuNiAxNy42LTEwLjQgNDMuMi0yOC44IDQzLjItMTAuOCAwLTE2LTEwLjQtMTYtMjEuNiAwLTQwIDE4LTg3LjIgMTgtOTIgMS42LTkuMi0xNC40LTIyLjQtMTkuMi0yMi40aC0yMC44Yy00IDAtOCAwLTIxLjItMS42LTQuNC0xNi40LTE1LjYtMjEuMi0yNS4yLTIxLjItMTAuNCAwLTIwIDcuMi0yMCAxOC40IDAgMTEuNiA3LjIgMjAgMTcuMiAyNS42LS40IDIwLjQtMiA1My42LTYuNCA2OS42LTMuNiAxMy42IDE3LjIgMjggMjIuNCAxMS4yIDcuMi0yMy4yIDkuNi01OCAxMC03My42aDM0LjhjLTEyLjggMzQuNC0yMCA2Mi44LTIwIDg4LjQgMCAzNS4yIDIyLjQgNDUuNiA0MS4yIDQ1LjZ6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTk4NC42IDMwOS44YzAgMTQuOCAxMS4yIDE3LjYgMTkuMiAxNy42IDExLjYgMCAxMS4yLTkuNiAxMS4yLTE3LjJ2LTU4LjRjMi44LTMxLjYgMjcuNi02NiAzOS4yLTY2IDcuNiAwIDguNCAxMC40IDguNCAyMi44djgxLjJjMCAyMC40IDEyLjQgMzcuNiAzMy42IDM3LjYgMzQuNCAwIDUxLjQtMzYgNTguMi02Mi40LjQtMS42LjQtMi40LjQtMi44IDAtNy42LTcuNi0xNi40LTE0LTE2LjQtNCAwLTggMy42LTkuNiAxMi0zLjYgMTcuNi0xMS44IDQzLjItMjcuOCA0My4yLTEwLjQgMC0xMC40LTE0LjgtMTAuNC0xOC40di04Mi44YzAtMTguNC02LjQtNDAuNC0zMy4yLTQwLjQtMTkuNiAwLTM0IDE3LjItNDQuOCAzOS42di0xOGMwLTkuNi04LjQtMTcuNi0yMS42LTE3LjYtNS42IDAtMTAuNCAyLjgtMTAuNCA2LjggMCAyLjggMS42IDUuMiAxLjYgMTIuOHYxMjYuOHpNMjU5IDBjMTQzIDAgMjU5IDExNiAyNTkgMjU5UzQwMiA1MTggMjU5IDUxOCAwIDQwMiAwIDI1OSAxMTYgMCAyNTkgMHoiLz48cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDM1LjIgMzM3LjVjLTEuOC0xNC4yLTEzLjgtMjQtMjkuMi0yMy44LTIzIC4zLTQyLjMgMTIuMi01NS4xIDIwLjEtNSAzLjEtOS4zIDUuNC0xMyA3LjEuOC0xMS42LjEtMjYuOC01LjktNDMuNS03LjMtMjAtMTcuMS0zMi4zLTI0LjEtMzkuNCA4LjEtMTEuOCAxOS4yLTI5IDI0LjQtNTUuNiA0LjUtMjIuNyAzLjEtNTgtNy4yLTc3LjgtMi4xLTQtNS42LTYuOS0xMC04LjEtMS44LS41LTUuMi0xLjUtMTEuOS40QzI5My4xIDk2IDI4OS42IDkzLjggMjg2LjkgOTJjLTUuNi0zLjYtMTIuMi00LjQtMTguNC0yLjEtOC4zIDMtMTUuNCAxMS0yMi4xIDI1LjItMSAyLjEtMS45IDQuMS0yLjcgNi4xLTEyLjcuOS0zMi43IDUuNS00OS42IDIzLjgtMi4xIDIuMy02LjIgNC0xMC41IDUuNmguMWMtOC44IDMuMS0xMi44IDEwLjMtMTcuNyAyMy4zLTYuOCAxOC4yLjIgMzYuMSA3LjEgNDcuNy05LjQgOC40LTIxLjkgMjEuOC0yOC41IDM3LjUtOC4yIDE5LjQtOS4xIDM4LjQtOC44IDQ4LjctNyA3LjQtMTcuOCAyMS4zLTE5IDM2LjktMS42IDIxLjggNi4zIDM2LjYgOS44IDQyIDEgMS42IDIuMSAyLjkgMy4zIDQuMi0uNCAyLjctLjUgNS42LjEgOC42IDEuMyA3IDUuNyAxMi43IDEyLjQgMTYuMyAxMy4yIDcgMzEuNiAxMCA0NS44IDIuOSA1LjEgNS40IDE0LjQgMTAuNiAzMS4zIDEwLjZoMWM0LjMgMCA1OC45LTIuOSA3NC44LTYuOCA3LjEtMS43IDEyLTQuNyAxNS4yLTcuNCAxMC4yLTMuMiAzOC40LTEyLjggNjUtMzAgMTguOC0xMi4yIDI1LjMtMTQuOCAzOS4zLTE4LjIgMTMuNi0zLjMgMjIuMS0xNS43IDIwLjQtMjkuNHptLTIzLjggMTQuN2MtMTYgMy44LTI0LjEgNy4zLTQzLjkgMjAuMi0zMC45IDIwLTY0LjcgMjkuMy02NC43IDI5LjNzLTIuOCA0LjItMTAuOSA2LjFjLTE0IDMuNC02Ni43IDYuMy03MS41IDYuNC0xMi45LjEtMjAuOC0zLjMtMjMtOC42LTYuNy0xNiA5LjYtMjMgOS42LTIzcy0zLjYtMi4yLTUuNy00LjJjLTEuOS0xLjktMy45LTUuNy00LjUtNC4zLTIuNSA2LjEtMy44IDIxLTEwLjUgMjcuNy05LjIgOS4zLTI2LjYgNi4yLTM2LjkuOC0xMS4zLTYgLjgtMjAuMS44LTIwLjFzLTYuMSAzLjYtMTEtMy44Yy00LjQtNi44LTguNS0xOC40LTcuNC0zMi43IDEuMi0xNi4zIDE5LjQtMzIuMSAxOS40LTMyLjFzLTMuMi0yNC4xIDcuMy00OC44YzkuNS0yMi41IDM1LjEtNDAuNiAzNS4xLTQwLjZzLTIxLjUtMjMuOC0xMy41LTQ1LjJjNS4yLTE0IDcuMy0xMy45IDktMTQuNSA2LTIuMyAxMS44LTQuOCAxNi4xLTkuNSAyMS41LTIzLjIgNDguOS0xOC44IDQ4LjktMTguOHMxMy0zOS41IDI1LTMxLjhjMy43IDIuNCAxNyAzMiAxNyAzMnMxNC4yLTguMyAxNS44LTUuMmM4LjYgMTYuNyA5LjYgNDguNiA1LjggNjgtNi40IDMyLTIyLjQgNDkuMi0yOC44IDYwLTEuNSAyLjUgMTcuMiAxMC40IDI5IDQzLjEgMTAuOSAyOS45IDEuMiA1NSAyLjkgNTcuOC4zLjUuNC43LjQuN3MxMi41IDEgMzcuNi0xNC41YzEzLjQtOC4zIDI5LjMtMTcuNiA0Ny40LTE3LjggMTcuNS0uMyAxOC40IDIwLjIgNS4yIDIzLjR6Ii8+PC9zdmc+" style="height:3em;vertical-align:middle"/></a><style data-emotion-css="kapooa">.css-kapooa{margin:1em;margin-left:0;border:1px solid lightgrey;border-radius:10px;width:3em;height:3em;font-size:inherit;background:#ffffff;}@media (min-width:761px){.css-kapooa{display:none;}}</style><button class="css-kapooa e1e22q4b6">â‰¡</button></div><style data-emotion-css="1syd0he">.css-1syd0he{background:#ffffff;}@media (min-width:761px){.css-1syd0he{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}@media (max-width:760px){.css-1syd0he{position:absolute;z-index:1;width:100%;-webkit-transform:scaleY(0);-ms-transform:scaleY(0);transform:scaleY(0);-webkit-transform-origin:top left;-ms-transform-origin:top left;transform-origin:top left;-webkit-transition:-webkit-transform .3s;-webkit-transition:transform .3s;transition:transform .3s;}.css-1syd0he.expanded{-webkit-transform:scaleY(1);-ms-transform:scaleY(1);transform:scaleY(1);}}</style><div class=" css-1syd0he e1e22q4b7"><style data-emotion-css="1rgujud">.css-1rgujud a{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:4em;border:3px solid transparent;padding:0 1em;font-family:Abel;font-weight:light;-webkit-text-decoration:none;text-decoration:none;text-transform:uppercase;color:#000000;}@media (min-width:761px){.css-1rgujud a.active{border-bottom-color:#2188b6;}}@media (max-width:760px){.css-1rgujud a{width:100%;}}</style><div class="css-1rgujud e1e22q4b8"><a href="/berry/">Home</a></div><div class="css-1rgujud e1e22q4b8"><a href="/berry/getting-started">Getting started</a></div><div class="css-1rgujud e1e22q4b8"><a href="/berry/configuration">Configuration</a></div><div class="css-1rgujud e1e22q4b8"><a class="active" href="/berry/features">Features</a></div><div class="css-1rgujud e1e22q4b8"><a href="/berry/cli">CLI</a></div><div class="css-1rgujud e1e22q4b8"><a href="/berry/advanced">Advanced</a></div></div></header></div><main><style data-emotion-css="o4e300">.css-o4e300{position:relative;}@media (min-width:761px){.css-o4e300{padding-left:300px;}}</style><div class="css-o4e300 e136yufg0"><style data-emotion-css="19tcs2g">@media (min-width:761px){.css-19tcs2g{position:fixed;left:0;width:300px;height:calc(100vh - 6.5em);overflow-y:auto;background:#d1dee8;}}</style><div class="css-19tcs2g e136yufg1"><style data-emotion-css="1srnx9y">.css-1srnx9y{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:1px solid #cfdee9;padding:1.5em;-webkit-text-decoration:none;text-decoration:none;background:#ffffff;color:#333333;}.css-1srnx9y:first-of-type{border-top:1px solid #cfdee9;}.css-1srnx9y::before{content:"";position:absolute;z-index:1;top:-1px;bottom:-1px;right:0;width:5px;background:#cfdee9;}.css-1srnx9y.active::before{background:#2188b6;}</style><a aria-current="page" class="css-1srnx9y e136yufg2 active" href="/berry/features/constraints">Constraints</a><a class="css-1srnx9y e136yufg2" href="/berry/features/offline-cache">Offline Cache</a><a class="css-1srnx9y e136yufg2" href="/berry/features/pnp">Plug&#x27;n&#x27;Play</a><a class="css-1srnx9y e136yufg2" href="/berry/features/plugins">Plugins</a><a class="css-1srnx9y e136yufg2" href="/berry/features/protocols">Protocols</a><a class="css-1srnx9y e136yufg2" href="/berry/features/workspaces">Workspaces</a><a class="css-1srnx9y e136yufg2" href="/berry/features/zero-installs">Zero-Installs</a></div><style data-emotion-css="rnvzr0">.css-rnvzr0 > *{overflow:auto;}</style><div class="css-rnvzr0 e136yufg3"><style data-emotion-css="r13wqs">.css-r13wqs{padding:2em;}@media (min-width:761px){.css-r13wqs{border-top:1px solid #cfdee9;text-align:justify;}}</style><div class="css-r13wqs e15875m70"><div style="max-width:900px"><article class="css-0 ej1wll30"><style data-emotion-css="1ry8ma5">.css-1ry8ma5{box-sizing:border-box;margin:0;height:4rem;border-bottom:1px solid;font-weight:300;font-size:2rem;line-height:4rem;}.css-1ry8ma5 + div > blockquote{font-style:normal;}</style><h1 class="css-1ry8ma5 ej1wll31">Constraints</h1><style data-emotion-css="iikyzi">.css-iikyzi blockquote{margin-left:0;border-left:3px solid #859daf;padding-left:.5em;font-style:italic;color:#859daf;}.css-iikyzi a:not(.anchor){border-bottom:1px solid;-webkit-text-decoration:none;text-decoration:none;color:#007aa2;}.css-iikyzi a:not(.anchor):hover{color:#62b0ca;}.css-iikyzi p,.css-iikyzi table{margin-bottom:1em;}.css-iikyzi table{width:100%;border-collapse:collapse;}.css-iikyzi th{color:#007aa2;}.css-iikyzi th,.css-iikyzi td{border:1px solid #007aa2;padding:.5em 1em;}.css-iikyzi h1{margin-top:0;}.css-iikyzi h2,.css-iikyzi h3,.css-iikyzi h4{border-bottom:1px solid #d1dee8;padding-bottom:0.2em;font-weight:300;}.css-iikyzi pre{padding:1em;overflow-x:auto;background:#242424;}.css-iikyzi code{display:inline-block;text-align:left;color:#007aa2;}.css-iikyzi pre code{color:#ddddcc;}.css-iikyzi img{max-width:100%;}</style><div class="css-iikyzi ej1wll32"><blockquote>
<p><strong>Experimental</strong></p>
<p>This feature is still incubating, and its exact API might change from a release to the next. It means it's the perfect time for you to get involved and let us hear your feedback!</p>
</blockquote>
<p>Constraints are a solution to a very basic need: I have a lot of <a href="/berry/features/workspaces">workspaces</a>, and I need to make sure they use the same version of their dependencies. Or that they don't depend on a specific package. Or that they use a specific type of dependency. Anyway, you see the point: whatever is the exact logic, my goal is the same; I want to automatically enforce some kind of rule across all my workspaces. That's exactly what constraints allow you to do.</p>
<h2 id="creating-a-constraint"><a href="#creating-a-constraint" aria-label="creating a constraint permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating a constraint</h2>
<p>Constraints are created by adding a <code class="language-text">constraints.pro</code> file at the root of your project (repository). The <code class="language-text">.pro</code> extension might leave you perplex: this is because constraints aren't written in JavaScript (!) but rather in Prolog, a fact-based rule engine. The goal of this section isn't to teach you Prolog (good tutorials already exist, such as <a href="https://learnxinyminutes.com/docs/prolog/">Learn Prolog in Y Minutes</a>),
but rather to show you why we chose it and the value it brings.</p>
<p>As we mentioned, Prolog is a fact-based engine. It starts with a list of <em>facts</em> that are always true, and a list of <em>predicates</em> that basically read as "predicate <code class="language-text">f(X)</code> is true if <code class="language-text">u(X)</code> and <code class="language-text">v(X)</code> are both true". By computing for which values of <code class="language-text">X</code> are <code class="language-text">u(X)</code> and <code class="language-text">v(X)</code> true, Prolog is able to automatically compute the list of values for which <code class="language-text">f(X)</code> would be true. This is particularly useful for constraints, because it allows you to write very simple but powerful rules that have the ability to affect all your workspaces in very few lines.</p>
<p>Going back to the constraint engine, the <em>facts</em> are the definitions created by the package manager (such as "fact: the root workspace depends on Lodash version 4.4.2 in devDependencies"), and the <em>predicates</em> are the set of rules that you want to enforce across your project (check below for some recipes).</p>
<h3 id="query-predicate"><a href="#query-predicate" aria-label="query predicate permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Query predicate</h3>
<p>The following predicates provide information about the current state of your project and are meant to be used in the dependencies of your own rules (check the recipes for examples how to use them in practice). Note that the <code class="language-text">/&lt;number&gt;</code> syntax listed at the end simply is the predicate arity (number of arguments it takes).</p>
<p>The notation on this page uses <code class="language-text">-</code>, <code class="language-text">+</code> and <code class="language-text">?</code> as prefix for the predicate parameters. These values are used commonly in prolog documentation and mean</p>
<ul>
<li><code class="language-text">+</code>: this value is considered input and must be instantiated</li>
<li><code class="language-text">-</code>: this value is considered output and will be instantiated by the predicate, though you can provide a value to verify that the value matches the predicate</li>
<li><code class="language-text">?</code>: this value can be instantiated or not, both will work</li>
</ul>
<h4 id="dependency_type1"><a href="#dependency_type1" aria-label="dependency_type1 permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">dependency_type/1</code></h4>
<div class="gatsby-highlight" data-language="prolog"><pre class="language-prolog"><code class="language-prolog"><span class="token function">dependency_type</span><span class="token punctuation">(</span>
  <span class="token operator">-</span><span class="token variable">DependencyType</span>
<span class="token punctuation">)</span><span class="token operator">.</span></code></pre></div>
<p>True for only three values: <code class="language-text">dependencies</code>, <code class="language-text">devDependencies</code> and <code class="language-text">peerDependencies</code>.</p>
<h4 id="workspace1"><a href="#workspace1" aria-label="workspace1 permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">workspace/1</code></h4>
<div class="gatsby-highlight" data-language="prolog"><pre class="language-prolog"><code class="language-prolog"><span class="token function">workspace</span><span class="token punctuation">(</span>
  <span class="token operator">-</span><span class="token variable">WorkspaceCwd</span>
<span class="token punctuation">)</span><span class="token operator">.</span></code></pre></div>
<p>True if the workspace described by the specified <code class="language-text">WorkspaceCwd</code> exists.</p>
<h4 id="workspace_ident2"><a href="#workspace_ident2" aria-label="workspace_ident2 permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">workspace_ident/2</code></h4>
<div class="gatsby-highlight" data-language="prolog"><pre class="language-prolog"><code class="language-prolog"><span class="token function">workspace_ident</span><span class="token punctuation">(</span>
  <span class="token operator">?</span><span class="token variable">WorkspaceCwd</span><span class="token punctuation">,</span>
  <span class="token operator">?</span><span class="token variable">WorkspaceIdent</span>
<span class="token punctuation">)</span><span class="token operator">.</span></code></pre></div>
<p>True if the workspace described by the specified <code class="language-text">WorkspaceCwd</code> exists and if it has the specified <code class="language-text">WorkspaceIdent</code>.</p>
<h4 id="workspace_version2"><a href="#workspace_version2" aria-label="workspace_version2 permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">workspace_version/2</code></h4>
<div class="gatsby-highlight" data-language="prolog"><pre class="language-prolog"><code class="language-prolog"><span class="token function">workspace_version</span><span class="token punctuation">(</span>
  <span class="token operator">?</span><span class="token variable">WorkspaceCwd</span><span class="token punctuation">,</span>
  <span class="token operator">?</span><span class="token variable">WorkspaceVersion</span>
<span class="token punctuation">)</span><span class="token operator">.</span></code></pre></div>
<p>True if the workspace described by the specified <code class="language-text">WorkspacedCwd</code> exists and if it has the specified <code class="language-text">WorkspaceVersion</code>.</p>
<h4 id="workspace_has_dependency4"><a href="#workspace_has_dependency4" aria-label="workspace_has_dependency4 permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">workspace_has_dependency/4</code></h4>
<div class="gatsby-highlight" data-language="prolog"><pre class="language-prolog"><code class="language-prolog"><span class="token function">workspace_has_dependency</span><span class="token punctuation">(</span>
  <span class="token operator">?</span><span class="token variable">WorkspaceCwd</span><span class="token punctuation">,</span>
  <span class="token operator">?</span><span class="token variable">DependencyIdent</span><span class="token punctuation">,</span>
  <span class="token operator">?</span><span class="token variable">DependencyRange</span><span class="token punctuation">,</span>
  <span class="token operator">?</span><span class="token variable">DependencyType</span>
<span class="token punctuation">)</span><span class="token operator">.</span></code></pre></div>
<p>True if the workspace described by the specified <code class="language-text">WorkspaceCwd</code> depends on the dependency described by the specified <code class="language-text">DependencyIdent</code> and <code class="language-text">DependencyRange</code> combination in the dependencies block of the given <code class="language-text">DependencyType</code>.</p>
<h4 id="workspace_field3"><a href="#workspace_field3" aria-label="workspace_field3 permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">workspace_field/3</code></h4>
<div class="gatsby-highlight" data-language="prolog"><pre class="language-prolog"><code class="language-prolog"><span class="token function">workspace_field</span><span class="token punctuation">(</span>
  <span class="token operator">+</span><span class="token variable">WorkspaceCwd</span><span class="token punctuation">,</span>
  <span class="token operator">+</span><span class="token variable">FieldPath</span><span class="token punctuation">,</span>
  <span class="token operator">-</span><span class="token variable">FieldValue</span>
<span class="token punctuation">)</span><span class="token operator">.</span></code></pre></div>
<p>True if the workspace described by the <code class="language-text">WorkspaceCwd</code> has the given <code class="language-text">FieldValue</code> in the manifest at <code class="language-text">FieldPath</code>.</p>
<p>The <code class="language-text">FieldPath</code> can target properties of properties via <code class="language-text">.</code> notation, e.g. a <code class="language-text">FieldPath</code> of <code class="language-text">&#39;publishConfig.registry&#39;</code> will set <code class="language-text">FieldValue</code> to the value of the <code class="language-text">registry</code> inside <code class="language-text">publishConfig</code>.</p>
<h3 id="constraint-predicates"><a href="#constraint-predicates" aria-label="constraint predicates permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Constraint predicates</h3>
<p>The following predicates will affect the behavior of the <code class="language-text">yarn constraints check</code> and <code class="language-text">yarn constraints fix</code> commands.</p>
<p>The parameters to the predicates are prefixed with <code class="language-text">+</code> and <code class="language-text">-</code>. These have the same meaning as in the query predicates. In this context they mean</p>
<ul>
<li><code class="language-text">-</code> These are the output, they will not have a value when the predicate is invoked and the predicate must ensure a value is set</li>
<li><code class="language-text">+</code> These are the input, they will already have a value when the predicate is invoked</li>
</ul>
<h4 id="gen_enforced_dependency4"><a href="#gen_enforced_dependency4" aria-label="gen_enforced_dependency4 permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">gen_enforced_dependency/4</code></h4>
<div class="gatsby-highlight" data-language="prolog"><pre class="language-prolog"><code class="language-prolog"><span class="token function">gen_enforced_dependency</span><span class="token punctuation">(</span>
  <span class="token operator">+</span><span class="token variable">WorkspaceCwd</span><span class="token punctuation">,</span>
  <span class="token operator">-</span><span class="token variable">DependencyIdent</span><span class="token punctuation">,</span>
  <span class="token operator">-</span><span class="token variable">DependencyRange</span><span class="token punctuation">,</span>
  <span class="token operator">+</span><span class="token variable">DependencyType</span>
<span class="token punctuation">)</span><span class="token operator">.</span></code></pre></div>
<p>The <code class="language-text">gen_enforced_dependency</code> rule offers a neat way to inform the package manager that a specific workspace MUST either depend on a specific range of a specific dependency (if <code class="language-text">DependencyRange</code> is non-null) or not depend at all on the dependency (if <code class="language-text">DependencyRange</code> is null) in the <code class="language-text">DependencyType</code> dependencies block.</p>
<ul>
<li><strong>This predicate allows the package manager to autofix the problems.</strong></li>
</ul>
<h4 id="gen_invalid_dependency4"><a href="#gen_invalid_dependency4" aria-label="gen_invalid_dependency4 permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">gen_invalid_dependency/4</code></h4>
<div class="gatsby-highlight" data-language="prolog"><pre class="language-prolog"><code class="language-prolog"><span class="token function">gen_invalid_dependency</span><span class="token punctuation">(</span>
  <span class="token operator">+</span><span class="token variable">WorkspaceCwd</span><span class="token punctuation">,</span>
  <span class="token operator">-</span><span class="token variable">DependencyIdent</span><span class="token punctuation">,</span>
  <span class="token operator">+</span><span class="token variable">DependencyType</span><span class="token punctuation">,</span>
  <span class="token operator">-</span><span class="token variable">Reason</span>
<span class="token punctuation">)</span><span class="token operator">.</span></code></pre></div>
<p>The <code class="language-text">gen_invalid_dependency</code> predicate is used to inform the package manager that a specific workspace cannot depend on its current version of the package defined by <code class="language-text">DependencyIdent</code> in the <code class="language-text">DependencyType</code> dependencies, the <code class="language-text">Reason</code> parameter being offered as a way to express why the dependency is invalid.</p>
<p>Contrary to <code class="language-text">gen_enforced_dependency</code>, <code class="language-text">gen_invalid_dependency</code> doesn't allow the package manager to autofix the problem. This makes <code class="language-text">gen_invalid_dependency</code> suitable in case where the right fix would be ambiguous, and where the intervention of a human operator would be required (for example when two workspaces depend on two different versions of a same package).</p>
<ul>
<li>The errors reported by this predicate <strong>cannot</strong> be auto-fixed</li>
<li>The reason parameter can be any string of your liking</li>
</ul>
<h4 id="gen_enforced_field3"><a href="#gen_enforced_field3" aria-label="gen_enforced_field3 permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">gen_enforced_field/3</code></h4>
<div class="gatsby-highlight" data-language="prolog"><pre class="language-prolog"><code class="language-prolog"><span class="token function">gen_enforced_field</span><span class="token punctuation">(</span>
  <span class="token operator">+</span><span class="token variable">WorkspaceCwd</span><span class="token punctuation">,</span>
  <span class="token operator">-</span><span class="token variable">FieldPath</span><span class="token punctuation">,</span>
  <span class="token operator">-</span><span class="token variable">FieldValue</span>
<span class="token punctuation">)</span><span class="token operator">.</span></code></pre></div>
<p>The <code class="language-text">gen_enforced_field</code> predicate tells the package manager that a specific workspace must have the given <code class="language-text">FieldValue</code> in the manifest via the <code class="language-text">FieldPath</code>. A <code class="language-text">FieldValue</code> of <code class="language-text">null</code> means the field has to be absent.</p>
<h2 id="constraint-recipes"><a href="#constraint-recipes" aria-label="constraint recipes permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Constraint recipes</h2>
<p>The following constraints are a good starting point to figure out how to write your own rules. If you build one that you think would be a good fit for this section, open a PR and we'll add them here!</p>
<blockquote>
<p><strong>Quick note about the Prolog syntax</strong></p>
<p>Be aware that in prolog <code class="language-text">X :- Y</code> basically means "X is true for each Y that's true". Similarly, know that UpperCamelCase names are variables that get "replaced" by every compatible value possible. Finally, the special variable name <code class="language-text">_</code> simply discards the parameter value.</p>
</blockquote>
<h3 id="prevent-all-workspaces-from-depending-on-a-specific-package"><a href="#prevent-all-workspaces-from-depending-on-a-specific-package" aria-label="prevent all workspaces from depending on a specific package permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Prevent all workspaces from depending on a specific package</h3>
<div class="gatsby-highlight" data-language="prolog"><pre class="language-prolog"><code class="language-prolog"><span class="token function">gen_enforced_dependency</span><span class="token punctuation">(</span><span class="token variable">WorkspaceCwd</span><span class="token punctuation">,</span> <span class="token string">'tslib'</span><span class="token punctuation">,</span> null<span class="token punctuation">,</span> <span class="token variable">DependencyType</span><span class="token punctuation">)</span> <span class="token operator">:-</span>
  <span class="token function">workspace_has_dependency</span><span class="token punctuation">(</span><span class="token variable">WorkspaceCwd</span><span class="token punctuation">,</span> <span class="token string">'tslib'</span><span class="token punctuation">,</span> <span class="token variable">_</span><span class="token punctuation">,</span> <span class="token variable">DependencyType</span><span class="token punctuation">)</span><span class="token operator">.</span></code></pre></div>
<p>We define a rule that says that for each dependency of each workspace in our project, if this dependency name is <code class="language-text">tslib</code>, then it exists a similar rule of the <code class="language-text">gen_enforced_dependency</code> type that forbids the workspace from depending on <code class="language-text">tslib</code>. This will cause the package manager to see that the rule isn't met, and autofix it when requested by removing the dependency from the workspace.</p>
<h3 id="prevent-two-workspaces-from-depending-on-conflicting-versions-of-a-same-dependency"><a href="#prevent-two-workspaces-from-depending-on-conflicting-versions-of-a-same-dependency" aria-label="prevent two workspaces from depending on conflicting versions of a same dependency permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Prevent two workspaces from depending on conflicting versions of a same dependency</h3>
<div class="gatsby-highlight" data-language="prolog"><pre class="language-prolog"><code class="language-prolog"><span class="token function">gen_invalid_dependency</span><span class="token punctuation">(</span><span class="token variable">WorkspaceCwd</span><span class="token punctuation">,</span> <span class="token variable">DependencyIdent</span><span class="token punctuation">,</span> <span class="token variable">DependencyType</span><span class="token punctuation">,</span> <span class="token string">'This dependency conflicts with another one from another workspace'</span><span class="token punctuation">)</span> <span class="token operator">:-</span>
  <span class="token function">workspace_has_dependency</span><span class="token punctuation">(</span><span class="token variable">WorkspaceCwd</span><span class="token punctuation">,</span> <span class="token variable">DependencyIdent</span><span class="token punctuation">,</span> <span class="token variable">DependencyRange</span><span class="token punctuation">,</span> <span class="token variable">DependencyType</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">workspace_has_dependency</span><span class="token punctuation">(</span><span class="token variable">_</span><span class="token punctuation">,</span> <span class="token variable">DependencyIdent</span><span class="token punctuation">,</span> <span class="token variable">DependencyRange2</span><span class="token punctuation">,</span> <span class="token variable">_</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token variable">DependencyRange</span> <span class="token operator">\=</span> <span class="token variable">DependencyRange2</span><span class="token operator">.</span></code></pre></div>
<p>We define a <code class="language-text">gen_invalid_dependency</code> rule that is true for each dependency of each package (first <code class="language-text">workspace_has_dependency</code>) if it also exists another dependency of another package (second <code class="language-text">workspace_has_dependency</code>) that has the same name but a different range (<code class="language-text">\=</code> operator).</p>
<h3 id="force-all-workspace-dependencies-to-be-made-explicit"><a href="#force-all-workspace-dependencies-to-be-made-explicit" aria-label="force all workspace dependencies to be made explicit permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Force all workspace dependencies to be made explicit</h3>
<div class="gatsby-highlight" data-language="prolog"><pre class="language-prolog"><code class="language-prolog"><span class="token function">gen_enforced_dependency</span><span class="token punctuation">(</span><span class="token variable">WorkspaceCwd</span><span class="token punctuation">,</span> <span class="token variable">DependencyIdent</span><span class="token punctuation">,</span> <span class="token string">'workspace:*'</span><span class="token punctuation">,</span> <span class="token variable">DependencyType</span><span class="token punctuation">)</span> <span class="token operator">:-</span>
  <span class="token function">workspace_ident</span><span class="token punctuation">(</span><span class="token variable">_</span><span class="token punctuation">,</span> <span class="token variable">DependencyIdent</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">workspace_has_dependency</span><span class="token punctuation">(</span><span class="token variable">WorkspaceCwd</span><span class="token punctuation">,</span> <span class="token variable">DependencyIdent</span><span class="token punctuation">,</span> <span class="token variable">_</span><span class="token punctuation">,</span> <span class="token variable">DependencyType</span><span class="token punctuation">)</span><span class="token operator">.</span></code></pre></div>
<p>We define a <code class="language-text">gen_enforced_dependency</code> that requires the dependency range <code class="language-text">workspace:*</code> to be used if the dependency name is also the name of a valid workspace. The final <code class="language-text">workspace_has_dependency</code> check is there to ensure that this rule is only applied on workspace that currently depend on the specified workspace in the first place (if it wasn't there, the rule would instead force all workspaces to depend on one another).</p></div></article></div></div></div></div></main></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/features/constraints";window.webpackCompilationHash="44fbb5f22504ba5e797f";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-ae3f388b34fccbee89b8.js"],"component---src-templates-article-js":["/component---src-templates-article-js-1d37326f7bb36f5934c8.js"],"component---src-pages-index-js":["/component---src-pages-index-js-70672a3ecc57a4ffbb3d.js"],"component---src-pages-404-js":["/component---src-pages-404-js-0533b1e00339fda1f465.js"],"component---src-pages-configuration-manifest-js":["/component---src-pages-configuration-manifest-js-0c034cb87216dd3b26b9.js"],"component---src-pages-configuration-yarnrc-js":["/component---src-pages-configuration-yarnrc-js-fe81897ab7611ddb9c8f.js"],"component---src-pages-package-js":["/component---src-pages-package-js-fbdafeab0e49dadafb63.js"]};/*]]>*/</script><script src="/berry/webpack-runtime-5553f1c66b7d1353382e.js" async=""></script><script src="/berry/app-ae3f388b34fccbee89b8.js" async=""></script><script src="/berry/1-50f6d08b729e906fd7a6.js" async=""></script><script src="/berry/13-2d155786c82a3926738b.js" async=""></script><script src="/berry/component---src-templates-article-js-1d37326f7bb36f5934c8.js" async=""></script><script src="/berry/styles-c2afc350e05105068187.js" async=""></script></body></html>