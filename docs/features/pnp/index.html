<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/berry/styles.dfc05131508d0b4d0d62.css">*{box-sizing:border-box}body,html{height:100%;margin:0;padding:0;font-family:Open Sans;line-height:1.5}code{font-family:PT Mono}</style><meta name="generator" content="Gatsby 2.2.9"/><title data-react-helmet="true"></title><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/berry/google-fonts/s/abel/v9/MwQ5bhbm2POE2V9BPQ.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/berry/google-fonts/s/baumans/v8/-W_-XJj9QyTd3Qfpd_04aw.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/berry/google-fonts/s/opensans/v16/mem5YaGs126MiZpBA-UN7rgOUuhp.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/berry/google-fonts/s/opensans/v16/mem5YaGs126MiZpBA-UN_r8OUuhp.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/berry/google-fonts/s/opensans/v16/mem8YaGs126MiZpBA-UFVZ0b.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/berry/google-fonts/s/ptmono/v6/9oRONYoBnWILk-9AnC8zMw.woff2"/><style type="text/css">@font-face{font-family:'Open Sans';font-style:normal;font-weight:300;src:local('Open Sans Light'),local('OpenSans-Light'),url(/berry/google-fonts/s/opensans/v16/mem5YaGs126MiZpBA-UN_r8OUuhp.woff2) format('woff2'),url(/berry/google-fonts/s/opensans/v16/mem5YaGs126MiZpBA-UN_r8OUuhv.woff) format('woff');font-display: swap}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;src:local('Open Sans Regular'),local('OpenSans-Regular'),url(/berry/google-fonts/s/opensans/v16/mem8YaGs126MiZpBA-UFVZ0b.woff2) format('woff2'),url(/berry/google-fonts/s/opensans/v16/mem8YaGs126MiZpBA-UFVZ0d.woff) format('woff');font-display: swap}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;src:local('Open Sans Bold'),local('OpenSans-Bold'),url(/berry/google-fonts/s/opensans/v16/mem5YaGs126MiZpBA-UN7rgOUuhp.woff2) format('woff2'),url(/berry/google-fonts/s/opensans/v16/mem5YaGs126MiZpBA-UN7rgOUuhv.woff) format('woff');font-display: swap}@font-face{font-family:Abel;font-style:normal;font-weight:400;src:local('Abel Regular'),local('Abel-Regular'),url(/berry/google-fonts/s/abel/v9/MwQ5bhbm2POE2V9BPQ.woff2) format('woff2'),url(/berry/google-fonts/s/abel/v9/MwQ5bhbm2POE2V9BOw.woff) format('woff');font-display: swap}@font-face{font-family:Baumans;font-style:normal;font-weight:400;src:local('Baumans Regular'),local('Baumans-Regular'),url(/berry/google-fonts/s/baumans/v8/-W_-XJj9QyTd3Qfpd_04aw.woff2) format('woff2'),url(/berry/google-fonts/s/baumans/v8/-W_-XJj9QyTd3Qfpd_04bQ.woff) format('woff');font-display: swap}@font-face{font-family:'PT Mono';font-style:normal;font-weight:400;src:local('PT Mono'),local('PTMono-Regular'),url(/berry/google-fonts/s/ptmono/v6/9oRONYoBnWILk-9AnC8zMw.woff2) format('woff2'),url(/berry/google-fonts/s/ptmono/v6/9oRONYoBnWILk-9AnC8zNQ.woff) format('woff');font-display: swap}</style><link rel="shortcut icon" href="/berry/icons/icon-48x48.png"/><link rel="manifest" href="/berry/manifest.webmanifest"/><meta name="theme-color" content="#2188b6"/><link rel="apple-touch-icon" sizes="48x48" href="/berry/icons/icon-48x48.png"/><link rel="apple-touch-icon" sizes="72x72" href="/berry/icons/icon-72x72.png"/><link rel="apple-touch-icon" sizes="96x96" href="/berry/icons/icon-96x96.png"/><link rel="apple-touch-icon" sizes="144x144" href="/berry/icons/icon-144x144.png"/><link rel="apple-touch-icon" sizes="192x192" href="/berry/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/berry/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/berry/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/berry/icons/icon-512x512.png"/><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link as="script" rel="preload" href="/berry/component---src-templates-article-js-6a1da28bb5ab62c3884e.js"/><link as="script" rel="preload" href="/berry/app-6d550db47a4e205297cb.js"/><link as="script" rel="preload" href="/berry/2-45c4ed6d738a08e00f5b.js"/><link as="script" rel="preload" href="/berry/1-c01c17ca753e879f146f.js"/><link as="script" rel="preload" href="/berry/styles-ae27307e11a7e368ed31.js"/><link as="script" rel="preload" href="/berry/webpack-runtime-b7dacf6f67d3920f2996.js"/><link as="fetch" rel="preload" href="/berry/static/d/769/path---features-pnp-5-ec-806-OGIWypy3VekhyFC8ZuADLN7X4.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><style data-emotion-css="3fu4ya">@media (min-width:601px){.css-3fu4ya{position:-webkit-sticky;position:sticky;top:0;z-index:1;}}</style><div class="css-3fu4ya e1e22q4b0"><style data-emotion-css="14wzgec">.css-14wzgec{display:block;padding:0.8em 1em;font-weight:light;-webkit-text-decoration:none;text-decoration:none;background:#2188b6;color:rgba(255,255,255,0.8);}</style><a href="https://github.com/yarnpkg/berry" class="css-14wzgec e1e22q4b1"><style data-emotion-css="ol3iif">.css-ol3iif{font-weight:bold;color:#ffffff;}</style><span class="css-ol3iif e1e22q4b2">Important:</span> This documentation covers the v2 onwards and is actively being worked on. Come help us!</a><style data-emotion-css="afjtw6">.css-afjtw6{background:#ffffff;}@media (min-width:601px){.css-afjtw6{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}</style><header class="css-afjtw6 e1e22q4b3"><style data-emotion-css="k008qs">.css-k008qs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><div class="css-k008qs e1e22q4b4"><style data-emotion-css="rmb94o">.css-rmb94o{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 1em;}@media (max-width:600px){.css-rmb94o{margin-right:auto;padding:1em;}}</style><a class="css-rmb94o e1e22q4b5" href="/berry/"><img alt="Yarn" src="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTE1NC44IDUxOCI+PHN0eWxlPi5zdDB7ZmlsbDojMmM4ZWJifS5zdDF7ZmlsbDojZmZmfTwvc3R5bGU+PHBhdGggY2xhc3M9InN0MCIgZD0iTTcxOC42IDI1Ny44Yy04IDI3LjYtMjAuOCA0Ny42LTM1LjIgNjMuNlYxODFjMC05LjYtOC40LTE3LjYtMjEuNi0xNy42LTUuNiAwLTEwLjQgMi44LTEwLjQgNi44IDAgMi44IDEuNiA1LjIgMS42IDEyLjh2NjQuNGMtNC44IDI4LTE2LjggNTQtMzIuOCA1NC0xMS42IDAtMTguNC0xMS42LTE4LjQtMzMuMiAwLTMzLjYgNC40LTUxLjIgMTEuNi04MC44IDEuNi02IDEzLjItMjItNi40LTIyLTIxLjIgMC0xOC40IDgtMjEuMiAxNC44IDAgMC0xMy40IDQ3LjYtMTMuNCA5MCAwIDM0LjggMTQuNiA1Ny42IDQxLjQgNTcuNiAxNy4yIDAgMjkuNi0xMS42IDM5LjItMjcuNlYzNTFjLTI2LjQgMjMuMi00OS42IDQzLjYtNDkuNiA4NCAwIDI1LjYgMTYgNDYgMzguNCA0NiAyMC40IDAgNDEuNi0xNC44IDQxLjYtNTYuOFYzNTVjMjEuNi0xOC44IDQ0LjgtNDIuNCA1OC40LTg4LjguNC0xLjYuNC0zLjYuNC00IDAtNy42LTcuNi0xNi40LTE0LTE2LjQtNCAwLTcuMiAzLjYtOS42IDEyem0tNzYuOCAxOThjLTYuNCAwLTEwLjQtOS42LTEwLjQtMjIgMC0yNCA4LjgtMzkuMiAyMS42LTUyLjR2NDIuOGMwIDcuNiAxLjYgMzEuNi0xMS4yIDMxLjZ6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTgzMy40IDMwMWMtOS42IDAtMTMuNi05LjYtMTMuNi0xOC40di02NmMwLTkuNi04LjQtMTcuNi0yMS42LTE3LjYtNS42IDAtMTAuNCAyLjgtMTAuNCA2LjggMCAyLjggMS42IDUuMiAxLjYgMTIuOHY2MS42Qzc4NSAyOTEuNCA3NzcuOCAzMDEgNzY3IDMwMWMtMTQgMC0yMi44LTEyLTIyLjgtMzIuOCAwLTU3LjYgMzUuNi04My42IDY2LTgzLjYgNCAwIDggLjggMTEuNi44IDQgMCA1LjItMi40IDUuMi05LjIgMC0xMC40LTcuNi0xNi44LTE4LjQtMTYuOC00OC44IDAtOTUuMiA0MC44LTk1LjIgMTA3LjYgMCAzNCAxNi40IDYwLjQgNDcuNiA2MC40IDE1LjIgMCAyNi40LTcuMiAzNC40LTE2LjQgNiA5LjYgMTYuOCAxNi40IDMwLjggMTYuNCAzNC40IDAgNTAuNC0zNiA1Ny4yLTYyLjQuNC0xLjYuNC0yLjQuNC0yLjggMC03LjYtNy42LTE2LjQtMTQtMTYuNC00IDAtOCAzLjYtOS42IDEyLTMuNiAxNy42LTEwLjggNDMuMi0yNi44IDQzLjJ6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTk0OSAzMjcuNGMzNC40IDAgNTAtMzYgNTcuMi02Mi40IDAtLjguNC0xLjYuNC0yLjggMC03LjYtNy42LTE2LjQtMTQtMTYuNC00IDAtOCAzLjYtOS42IDEyLTMuNiAxNy42LTEwLjQgNDMuMi0yOC44IDQzLjItMTAuOCAwLTE2LTEwLjQtMTYtMjEuNiAwLTQwIDE4LTg3LjIgMTgtOTIgMS42LTkuMi0xNC40LTIyLjQtMTkuMi0yMi40aC0yMC44Yy00IDAtOCAwLTIxLjItMS42LTQuNC0xNi40LTE1LjYtMjEuMi0yNS4yLTIxLjItMTAuNCAwLTIwIDcuMi0yMCAxOC40IDAgMTEuNiA3LjIgMjAgMTcuMiAyNS42LS40IDIwLjQtMiA1My42LTYuNCA2OS42LTMuNiAxMy42IDE3LjIgMjggMjIuNCAxMS4yIDcuMi0yMy4yIDkuNi01OCAxMC03My42aDM0LjhjLTEyLjggMzQuNC0yMCA2Mi44LTIwIDg4LjQgMCAzNS4yIDIyLjQgNDUuNiA0MS4yIDQ1LjZ6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTk4NC42IDMwOS44YzAgMTQuOCAxMS4yIDE3LjYgMTkuMiAxNy42IDExLjYgMCAxMS4yLTkuNiAxMS4yLTE3LjJ2LTU4LjRjMi44LTMxLjYgMjcuNi02NiAzOS4yLTY2IDcuNiAwIDguNCAxMC40IDguNCAyMi44djgxLjJjMCAyMC40IDEyLjQgMzcuNiAzMy42IDM3LjYgMzQuNCAwIDUxLjQtMzYgNTguMi02Mi40LjQtMS42LjQtMi40LjQtMi44IDAtNy42LTcuNi0xNi40LTE0LTE2LjQtNCAwLTggMy42LTkuNiAxMi0zLjYgMTcuNi0xMS44IDQzLjItMjcuOCA0My4yLTEwLjQgMC0xMC40LTE0LjgtMTAuNC0xOC40di04Mi44YzAtMTguNC02LjQtNDAuNC0zMy4yLTQwLjQtMTkuNiAwLTM0IDE3LjItNDQuOCAzOS42di0xOGMwLTkuNi04LjQtMTcuNi0yMS42LTE3LjYtNS42IDAtMTAuNCAyLjgtMTAuNCA2LjggMCAyLjggMS42IDUuMiAxLjYgMTIuOHYxMjYuOHpNMjU5IDBjMTQzIDAgMjU5IDExNiAyNTkgMjU5UzQwMiA1MTggMjU5IDUxOCAwIDQwMiAwIDI1OSAxMTYgMCAyNTkgMHoiLz48cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDM1LjIgMzM3LjVjLTEuOC0xNC4yLTEzLjgtMjQtMjkuMi0yMy44LTIzIC4zLTQyLjMgMTIuMi01NS4xIDIwLjEtNSAzLjEtOS4zIDUuNC0xMyA3LjEuOC0xMS42LjEtMjYuOC01LjktNDMuNS03LjMtMjAtMTcuMS0zMi4zLTI0LjEtMzkuNCA4LjEtMTEuOCAxOS4yLTI5IDI0LjQtNTUuNiA0LjUtMjIuNyAzLjEtNTgtNy4yLTc3LjgtMi4xLTQtNS42LTYuOS0xMC04LjEtMS44LS41LTUuMi0xLjUtMTEuOS40QzI5My4xIDk2IDI4OS42IDkzLjggMjg2LjkgOTJjLTUuNi0zLjYtMTIuMi00LjQtMTguNC0yLjEtOC4zIDMtMTUuNCAxMS0yMi4xIDI1LjItMSAyLjEtMS45IDQuMS0yLjcgNi4xLTEyLjcuOS0zMi43IDUuNS00OS42IDIzLjgtMi4xIDIuMy02LjIgNC0xMC41IDUuNmguMWMtOC44IDMuMS0xMi44IDEwLjMtMTcuNyAyMy4zLTYuOCAxOC4yLjIgMzYuMSA3LjEgNDcuNy05LjQgOC40LTIxLjkgMjEuOC0yOC41IDM3LjUtOC4yIDE5LjQtOS4xIDM4LjQtOC44IDQ4LjctNyA3LjQtMTcuOCAyMS4zLTE5IDM2LjktMS42IDIxLjggNi4zIDM2LjYgOS44IDQyIDEgMS42IDIuMSAyLjkgMy4zIDQuMi0uNCAyLjctLjUgNS42LjEgOC42IDEuMyA3IDUuNyAxMi43IDEyLjQgMTYuMyAxMy4yIDcgMzEuNiAxMCA0NS44IDIuOSA1LjEgNS40IDE0LjQgMTAuNiAzMS4zIDEwLjZoMWM0LjMgMCA1OC45LTIuOSA3NC44LTYuOCA3LjEtMS43IDEyLTQuNyAxNS4yLTcuNCAxMC4yLTMuMiAzOC40LTEyLjggNjUtMzAgMTguOC0xMi4yIDI1LjMtMTQuOCAzOS4zLTE4LjIgMTMuNi0zLjMgMjIuMS0xNS43IDIwLjQtMjkuNHptLTIzLjggMTQuN2MtMTYgMy44LTI0LjEgNy4zLTQzLjkgMjAuMi0zMC45IDIwLTY0LjcgMjkuMy02NC43IDI5LjNzLTIuOCA0LjItMTAuOSA2LjFjLTE0IDMuNC02Ni43IDYuMy03MS41IDYuNC0xMi45LjEtMjAuOC0zLjMtMjMtOC42LTYuNy0xNiA5LjYtMjMgOS42LTIzcy0zLjYtMi4yLTUuNy00LjJjLTEuOS0xLjktMy45LTUuNy00LjUtNC4zLTIuNSA2LjEtMy44IDIxLTEwLjUgMjcuNy05LjIgOS4zLTI2LjYgNi4yLTM2LjkuOC0xMS4zLTYgLjgtMjAuMS44LTIwLjFzLTYuMSAzLjYtMTEtMy44Yy00LjQtNi44LTguNS0xOC40LTcuNC0zMi43IDEuMi0xNi4zIDE5LjQtMzIuMSAxOS40LTMyLjFzLTMuMi0yNC4xIDcuMy00OC44YzkuNS0yMi41IDM1LjEtNDAuNiAzNS4xLTQwLjZzLTIxLjUtMjMuOC0xMy41LTQ1LjJjNS4yLTE0IDcuMy0xMy45IDktMTQuNSA2LTIuMyAxMS44LTQuOCAxNi4xLTkuNSAyMS41LTIzLjIgNDguOS0xOC44IDQ4LjktMTguOHMxMy0zOS41IDI1LTMxLjhjMy43IDIuNCAxNyAzMiAxNyAzMnMxNC4yLTguMyAxNS44LTUuMmM4LjYgMTYuNyA5LjYgNDguNiA1LjggNjgtNi40IDMyLTIyLjQgNDkuMi0yOC44IDYwLTEuNSAyLjUgMTcuMiAxMC40IDI5IDQzLjEgMTAuOSAyOS45IDEuMiA1NSAyLjkgNTcuOC4zLjUuNC43LjQuN3MxMi41IDEgMzcuNi0xNC41YzEzLjQtOC4zIDI5LjMtMTcuNiA0Ny40LTE3LjggMTcuNS0uMyAxOC40IDIwLjIgNS4yIDIzLjR6Ii8+PC9zdmc+" style="height:3em;vertical-align:middle"/></a><style data-emotion-css="w60let">.css-w60let{margin:1em;margin-left:0;border:1px solid lightgrey;border-radius:10px;width:3em;height:3em;font-size:inherit;background:#ffffff;}@media (min-width:601px){.css-w60let{display:none;}}</style><button class="css-w60let e1e22q4b6">≡</button></div><style data-emotion-css="136322t">.css-136322t{background:#ffffff;}@media (min-width:601px){.css-136322t{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}@media (max-width:600px){.css-136322t{position:absolute;z-index:1;width:100%;-webkit-transform:scaleY(0);-ms-transform:scaleY(0);transform:scaleY(0);-webkit-transform-origin:top left;-ms-transform-origin:top left;transform-origin:top left;-webkit-transition:-webkit-transform .3s;-webkit-transition:transform .3s;transition:transform .3s;}.css-136322t.expanded{-webkit-transform:scaleY(1);-ms-transform:scaleY(1);transform:scaleY(1);}}</style><div class=" css-136322t e1e22q4b7"><style data-emotion-css="1s1x8cq">.css-1s1x8cq{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:4em;border:3px solid transparent;padding:0 1em;font-family:Abel;font-weight:light;-webkit-text-decoration:none;text-decoration:none;text-transform:uppercase;color:#000000;}@media (min-width:601px){.css-1s1x8cq.active{border-bottom-color:#2188b6;}}@media (max-width:600px){.css-1s1x8cq{width:100%;}}</style><a class="css-1s1x8cq e1e22q4b8" href="/berry/">Home</a><a class="css-1s1x8cq e1e22q4b8" href="/berry/getting-started">Getting started</a><a class="css-1s1x8cq e1e22q4b8" href="/berry/configuration">Configuration</a><a class="css-1s1x8cq e1e22q4b8 active" href="/berry/features">Features</a><a class="css-1s1x8cq e1e22q4b8" href="/berry/cli/install">CLI</a><a class="css-1s1x8cq e1e22q4b8" href="/berry/advanced/architecture">Advanced</a></div></header></div><main><style data-emotion-css="w837w5">.css-w837w5{position:relative;}@media (min-width:601px){.css-w837w5{padding-left:300px;}}</style><div class="css-w837w5 e136yufg0"><style data-emotion-css="1m2g9kf">@media (min-width:601px){.css-1m2g9kf{position:fixed;left:0;width:300px;height:calc(100vh - 4em);overflow-y:auto;background:#d1dee8;}}</style><div class="css-1m2g9kf e136yufg1"><style data-emotion-css="1srnx9y">.css-1srnx9y{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:1px solid #cfdee9;padding:1.5em;-webkit-text-decoration:none;text-decoration:none;background:#ffffff;color:#333333;}.css-1srnx9y:first-of-type{border-top:1px solid #cfdee9;}.css-1srnx9y::before{content:"";position:absolute;z-index:1;top:-1px;bottom:-1px;right:0;width:5px;background:#cfdee9;}.css-1srnx9y.active::before{background:#2188b6;}</style><a class="css-1srnx9y e136yufg2" href="/berry/features/constraints">Constraints</a><a class="css-1srnx9y e136yufg2" href="/berry/features/offline-cache">Offline Cache</a><a aria-current="page" class="css-1srnx9y e136yufg2 active" href="/berry/features/pnp">Plug&#x27;n&#x27;Play</a><a class="css-1srnx9y e136yufg2" href="/berry/features/plugins">Plugins</a><a class="css-1srnx9y e136yufg2" href="/berry/features/protocols">Protocols</a><a class="css-1srnx9y e136yufg2" href="/berry/features/workspaces">Workspaces</a><a class="css-1srnx9y e136yufg2" href="/berry/features/zero-installs">Zero-Installs</a></div><style data-emotion-css="rnvzr0">.css-rnvzr0 > *{overflow:auto;}</style><div class="css-rnvzr0 e136yufg3"><style data-emotion-css="2aowkf">.css-2aowkf{padding:2em;}@media (min-width:601px){.css-2aowkf{border-top:1px solid #cfdee9;text-align:justify;}}</style><div class="css-2aowkf e15875m70"><div style="max-width:900px"><article class="css-0 ej1wll30"><style data-emotion-css="1ry8ma5">.css-1ry8ma5{box-sizing:border-box;margin:0;height:4rem;border-bottom:1px solid;font-weight:300;font-size:2rem;line-height:4rem;}.css-1ry8ma5 + div > blockquote{font-style:normal;}</style><h1 class="css-1ry8ma5 ej1wll31">Plug&#x27;n&#x27;Play</h1><style data-emotion-css="1bpuelp">.css-1bpuelp blockquote{margin-left:0;border-left:3px solid #859daf;padding-left:.5em;font-style:italic;color:#859daf;}.css-1bpuelp a:not(.anchor){border-bottom:1px solid;-webkit-text-decoration:none;text-decoration:none;color:#007aa2;}.css-1bpuelp a:not(.anchor):hover{color:#62b0ca;}.css-1bpuelp p,.css-1bpuelp table{margin-bottom:1em;}.css-1bpuelp table{width:100%;border-collapse:collapse;}.css-1bpuelp th{color:#007aa2;}.css-1bpuelp th,.css-1bpuelp td{border:1px solid #007aa2;padding:.5em 1em;}.css-1bpuelp h1{margin-top:0;}.css-1bpuelp h2,.css-1bpuelp h3,.css-1bpuelp h4{border-bottom:1px solid #d1dee8;padding-bottom:0.2em;font-weight:300;}.css-1bpuelp pre{padding:1em;overflow-x:auto;background:#242424;}.css-1bpuelp code{color:#007aa2;}.css-1bpuelp pre code{color:#ddddcc;}</style><div class="css-1bpuelp ej1wll32"><p>Unveiled in September 2018, Plug'n'Play is a new innovative installation strategy for Node. Based on prior works from other languages (for example <a href="https://getcomposer.org/doc/04-schema.md#autoload">autoload</a> from PHP), it presents interesting characteristics that build upon the regular commonjs <code>require</code> workflow in an almost completely backward-compatible way.</p>
<h2 id="the-node_modules-problem"><a href="#the-node_modules-problem" aria-label="the node_modules problem permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The node_modules problem</h2>
<p>The way installs used to work was simple: when running <code>yarn install</code> Yarn would generate a <code>node_modules</code> directory that Node was then able to consume thanks to its builtin <a href="https://nodejs.org/api/modules.html#modules_all_together">Node Resolution Algorithm</a>. In this context, Node didn't have to know the first thing about what a "package" was: it only reasoned in terms of files. "Does this file exists here? No? Let's look in the parent <code>node_modules</code> then. Does it exists here? Still no? Too bad...", and it kept going until it found the right one. This process was vastly inefficient, and for a lot of reasons:</p>
<ul>
<li>
<p>The <code>node_modules</code> directories typically contained gargantuan amounts of files. Generating them could make up for more than 70% of the time needed to run <code>yarn install</code>. Even having preexisting installations wouldn't save you, as package managers still had to diff the existing <code>node_modules</code> with what it should have beeen.</p>
</li>
<li>
<p>Because the <code>node_modules</code> generation was an I/O-heavy operation, package managers didn't have a lot of leeway to optimize it much further than just doing a simple file copy - and even though we could have used hardlinks or copy-on-write when possible, we would still have needed to diff the current state of the filesystem before making a bunch of syscalls to manipulate the disk.</p>
</li>
<li>
<p>Because Node had no concept of package, it didn't know either whether a file was <em>meant</em> to be accessed (versus being available by the sheer virtue of hoisting). It was entirely possible that the code you wrote worked one day in development but broke later in production because you forgot to list one of your dependencies in your <code>package.json</code>.</p>
</li>
<li>
<p>Even at runtime, the Node resolution had to make a bunch of <code>stat</code> and <code>readdir</code> calls in order to figure out from where to load every single required file. It was extremely wasteful, and was part of why booting Node applications took so much time.</p>
</li>
<li>
<p>Finally, the very design of the <code>node_modules</code> folder was impractical in that it didn't allow package managers to properly dedupe packages. Even though some algorithms could be employed to optimize the tree layout (hoisting), we still ended up unable to optimize some particular patterns - causing not only the disk usage to be higher than needed, but also some packages to be instantiated multiple times in memory.</p>
</li>
</ul>
<h2 id="fixing-node_modules"><a href="#fixing-node_modules" aria-label="fixing node_modules permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fixing node_modules</h2>
<p>When you think about it, Yarn already knows everything about your dependency tree - after all it even installs it on the disk for you. So the question becomes: why do we let it to Node to locate the packages? Why didn't we simply tell Node where to find them, and inform it that any require call to X by Y was meant to access the files from a specific set of dependencies? This is from this postulate that Plug'n'Play was created.</p>
<p>In this install mode (now the default starting from Yarn v2), Yarn generates a single <code>.pnp.js</code> file instead of the usual <code>node_modules</code>. Instead of containing the source code of the installed packages, the <code>.pnp.js</code> file contains a map linking a package name and version to a location on the disk, and another map linking a package name and version to its set of dependencies. Thanks to this efficient system, Node can directly know where to look for files being required - regardless who asks for them!</p>
<p>This approach as various benefits:</p>
<ul>
<li>
<p>Since we only need to generate a single text file instead of tens of thousands, installs are now pretty much instantaneous - the main bottleneck becomes the number of dependencies in your project rather than your disk performances.</p>
</li>
<li>
<p>Our installs are made stabler, as I/O operations are prone to fail (like on Windows, where writing and removing files in batch may trigger various unintended interactions with Windows Defender and similar tools).</p>
</li>
<li>
<p>Since we aren't supported by a filesystem hierarchy anymore we can guarantee not only a perfect optimization of the dependency tree (aka perfect hoisting), but also predictable package instantiations.</p>
</li>
<li>
<p>The generated file can be checked within your repository as part of the <a href="/berry/features/zero-installs">Zero-Installs</a> effort, removing the need to run <code>yarn install</code> in the first place.</p>
</li>
<li>
<p>Your applications start faster, because the Node resolution doesn't have to iterate over the filesystem hierarchy nearly as much as before (and soon won't have to do it at all!).</p>
</li>
</ul>
<h2 id="caveats-and-work-in-progress"><a href="#caveats-and-work-in-progress" aria-label="caveats and work in progress permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Caveats and work-in-progress</h2>
<p>During the years that led to Plug'n'Play being designed and adopted as main install strategy, various projects came up with their own implementation of the Node Resolution Algorithm - usually to circumvent shortcomings of the <code>require.resolve</code> API. Such projects can be Webpack (<code>enhanced-resolve</code>), Babel (<code>resolve</code>), Jest (<code>jest-resolve</code>), Metro (<code>metro-resolver</code>), ...</p>
<p>The following compatibility table gives you an idea of the integration status with various tools from the community. Note that only CLI tools are listed there, as frontend libraries (such as <code>react</code>, <code>vue</code>, <code>lodash</code>, ...) don't reimplement the Node resolution and as such don't need any special logic to take advantage from Plug'n'Play:</p>
<table>
<thead>
<tr>
<th>Project name</th>
<th>Status</th>
<th>Note</th>
</tr>
</thead>
<tbody>
<tr>
<td>Babel</td>
<td>Native</td>
<td>Starting from <code>resolve</code> 1.9+</td>
</tr>
<tr>
<td>Create-React-App</td>
<td>Native</td>
<td>Starting from 2.0+</td>
</tr>
<tr>
<td>ESLint</td>
<td>Native</td>
<td>Some compatibility issues when used w/ shared configs</td>
</tr>
<tr>
<td>Gatsby</td>
<td>Native</td>
<td>Currently</td>
</tr>
<tr>
<td>Jest</td>
<td>Native</td>
<td>Starting from 24.1+</td>
</tr>
<tr>
<td>Rollup</td>
<td>Plugin</td>
<td>Via <a href="https://github.com/arcanis/rollup-plugin-pnp-resolve"><code>rollup-plugin-pnp-resolve</code></a></td>
</tr>
<tr>
<td>TypeScript</td>
<td>Plugin</td>
<td>Via Webpack and <a href="https://github.com/arcanis/pnp-webpack-plugin#ts-loader-integration"><code>ts-loader</code></a></td>
</tr>
<tr>
<td>Webpack</td>
<td>Plugin</td>
<td>Via <a href="https://github.com/arcanis/pnp-webpack-plugin"><code>pnp-webpack-plugin</code></a></td>
</tr>
</tbody>
</table>
<p>This list is kept up-to-date based on the latest release we've published starting from the v2. In case you notice something off in your own project please try to upgrade Yarn and the problematic package first, then feel free to an issue. And maybe a PR? 😊</p></div></article></div></div></div></div></main></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-article-js","jsonName":"features-pnp-5ec","path":"/features/pnp"};window.dataPath="769/path---features-pnp-5-ec-806-OGIWypy3VekhyFC8ZuADLN7X4";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-6d550db47a4e205297cb.js"],"component---src-templates-article-js":["/component---src-templates-article-js-6a1da28bb5ab62c3884e.js"],"component---src-pages-index-js":["/component---src-pages-index-js-c9f19eea234090f4d2b9.js"],"component---src-pages-404-js":["/component---src-pages-404-js-44667a8d8c9ed2e4407e.js"],"component---src-pages-configuration-manifest-js":["/component---src-pages-configuration-manifest-js-9645a25bc82f172f93e8.js"],"component---src-pages-configuration-yarnrc-js":["/component---src-pages-configuration-yarnrc-js-b522f2702bced553ad48.js"],"component---src-pages-package-js":["/component---src-pages-package-js-f00f902a19577871241f.js"],"pages-manifest":["/pages-manifest-acf694e5ffe193bc8d72.js"]};/*]]>*/</script><script src="/berry/webpack-runtime-b7dacf6f67d3920f2996.js" async=""></script><script src="/berry/styles-ae27307e11a7e368ed31.js" async=""></script><script src="/berry/1-c01c17ca753e879f146f.js" async=""></script><script src="/berry/2-45c4ed6d738a08e00f5b.js" async=""></script><script src="/berry/app-6d550db47a4e205297cb.js" async=""></script><script src="/berry/component---src-templates-article-js-6a1da28bb5ab62c3884e.js" async=""></script></body></html>